"use strict";var An=Object.defineProperty;var bo=Object.getOwnPropertyDescriptor;var _o=Object.getOwnPropertyNames;var xo=Object.prototype.hasOwnProperty;var ko=(t,e)=>{for(var n in e)An(t,n,{get:e[n],enumerable:!0})},Co=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _o(e))!xo.call(t,i)&&i!==n&&An(t,i,{get:()=>e[i],enumerable:!(r=bo(e,i))||r.enumerable});return t};var Po=t=>Co(An({},"__esModule",{value:!0}),t);var ea={};ko(ea,{UPDATE_DEBOUNCE:()=>ot,default:()=>Dn});module.exports=Po(ea);var le=require("obsidian");var $e=require("obsidian"),$=new Map,kr=0,se;function Cr(t){se=t}function Se(){return $}var Fn=(t,e)=>{var n,r;if(!(se.settings.enableIgnoreObsExcludeFoldersLinksFrom&&(t!=null&&t.path)&&se.app.metadataCache.isUserIgnored(t==null?void 0:t.path))){for(let i of[e==null?void 0:e.links,e==null?void 0:e.embeds,e==null?void 0:e.frontmatterLinks])if(i)for(let o of i){let{path:l,subpath:a}=o.link.startsWith("#")?(0,$e.parseLinktext)(t.path.replace(`.${t.extension}`,"")+o.link):(0,$e.parseLinktext)(o.link),s=se.app.metadataCache.getFirstLinkpathDest(l,"/");if(s){if(se.settings.enableIgnoreObsExcludeFoldersLinksTo&&(s!=null&&s.path)&&se.app.metadataCache.isUserIgnored(s.path)||((r=(n=se.app.metadataCache.getFileCache(s))==null?void 0:n.frontmatter)==null?void 0:r["snw-index-exclude"])===!0)continue;let p=(s?s.path.replace(`.${s.extension}`,"")+a:l).toLocaleUpperCase();$.set(p,[...$.get(p)||[],{realLink:o.link,reference:o,resolvedFile:s,sourceFile:t}])}else{let p=o.link.toLocaleUpperCase();$.set(p,[...$.get(p)||[],{realLink:o.link,reference:o,resolvedFile:{path:`${l}.md`,name:`${l}.md`,basename:l,extension:"md"},sourceFile:t}])}}}},Pr=async t=>{for(let[e,n]of $.entries()){let r=n.filter(i=>{var o;return((o=i==null?void 0:i.sourceFile)==null?void 0:o.path)!==t.path});r.length===0?$.delete(e):$.set(e,r)}};function rn(){if(se.showCountsActive===!0){$=new Map;for(let t of se.app.vault.getMarkdownFiles()){let e=se.app.metadataCache.getFileCache(t);e&&Fn(t,e)}window.snwAPI.references=$,kr=Date.now()}}var xr=new Map;function ce(t){var o;if(se.showCountsActive!==!0)return{};let e=xr.get(t.path.toLocaleUpperCase());if(e){let l=(o=e.createDate)!=null?o:0;if(kr<l&&l+1e3>Date.now())return e}let n={},r=se.app.metadataCache.getFileCache(t);if(!r)return n;let i=t.path.replace(`.${t.extension}`,"").toLocaleUpperCase();if($||rn(),r!=null&&r.headings){let l=`${i}#`,a=r.headings.filter(s=>$.has(l+(0,$e.stripHeading)(s.heading).toLocaleUpperCase())).map(s=>{let p=l+(0,$e.stripHeading)(s.heading).toLocaleUpperCase();return{original:"#".repeat(s.level)+s.heading,key:p,headerMatch:s.heading.replace(/\[|\]/g,""),pos:s.position,page:t.basename,type:"heading",references:$.get(p)}});a.length>0&&(n.headings=a)}if(r!=null&&r.blocks){let l=Object.values(r.blocks).filter(a=>{var s;return(((s=$.get(`${i}#^${a.id.toUpperCase()}`))==null?void 0:s.length)||0)>0}).map(a=>{let s=`${i}#^${a.id.toLocaleUpperCase()}`;return{key:s,pos:a.position,page:t.basename,type:"block",references:$.get(s)}});l.length>0&&(n.blocks=l)}if(r!=null&&r.links){let l=r.links.filter(a=>{let s=re(a.link.startsWith("#")?i+a.link:a.link).toLocaleUpperCase()||a.link.toLocaleUpperCase(),p=$.get(s);return(p==null?void 0:p.length)>0}).map(a=>{let s=re(a.link.startsWith("#")?i+a.link:a.link).toLocaleUpperCase()||a.link.toLocaleUpperCase(),p={key:s,original:a.original,type:"link",pos:a.position,page:t.basename,references:$.get(s)||[]};return s.includes("#")&&!s.includes("#^")&&(p.original=s.split("#")[1]),p});l.length>0&&(n.links=l)}if(r!=null&&r.embeds){let l=r.embeds.filter(a=>{var f;let s=(a.link.startsWith("#")?re(i+a.link):re(a.link)).toLocaleUpperCase()||a.link.toLocaleUpperCase(),p=s.startsWith("#")?`${t.basename}${s}`:s;return((f=$.get(p))==null?void 0:f.length)>0}).map(a=>{var d;let p=(()=>{let h=a.link.startsWith("#")?i+a.link:a.link;return re(h).toLocaleUpperCase()||a.link.toLocaleUpperCase()})(),f=p.startsWith("#")?`${t.basename}${p}`:p,[u,g]=f.includes("#")&&!f.includes("#^")?f.split("#"):[];return{key:f,page:t.basename,type:"embed",pos:a.position,references:(d=$.get(f))!=null?d:[],...g&&{original:g}}});l.length>0&&(n.embeds=l)}if(r!=null&&r.frontmatterLinks){let l=r.frontmatterLinks.filter(a=>$.has(re(a.link).toLocaleUpperCase()||a.link.toLocaleUpperCase())).map(a=>{let s=re(a.link).toLocaleUpperCase()||a.link.toLocaleUpperCase();return{key:s,original:a.original,type:"frontmatterLink",pos:{start:{line:-1,col:-1,offset:-1},end:{line:-1,col:-1,offset:-1}},displayText:a.displayText,page:t.basename,references:$.get(s)||[]}});l.length>0&&(n.frontmatterLinks=l)}return n.cacheMetaData=r,n.createDate=Date.now(),xr.set(t.path,n),n}function re(t){let e=(0,$e.parseLinktext)(t),n=se.app.metadataCache.getFirstLinkpathDest(e.path,"/");return n===null?"":n.path.replace(`.${n.extension}`,"")+e.subpath}var on={enableOnStartupDesktop:!0,enableOnStartupMobile:!0,minimumRefCountThreshold:1,maxFileCountToDisplay:100,displayIncomingFilesheader:!0,displayInlineReferencesLivePreview:!0,displayInlineReferencesMarkdown:!0,displayInlineReferencesInSourceMode:!1,displayEmbedReferencesInGutter:!1,displayEmbedReferencesInGutterMobile:!1,displayPropertyReferences:!0,displayPropertyReferencesMobile:!1,enableRenderingBlockIdInMarkdown:!0,enableRenderingLinksInMarkdown:!0,enableRenderingHeadersInMarkdown:!0,enableRenderingEmbedsInMarkdown:!0,enableRenderingBlockIdInLivePreview:!0,enableRenderingLinksInLivePreview:!0,enableRenderingHeadersInLivePreview:!0,enableRenderingEmbedsInLivePreview:!0,enableIgnoreObsExcludeFoldersLinksFrom:!1,enableIgnoreObsExcludeFoldersLinksTo:!1,requireModifierKeyToActivateSNWView:!1,sortOptionDefault:"name-asc",displayCustomPropertyList:""};var Et=class{constructor(e){this.references=new Map;this.console=(e,...n)=>{console.log(`SNW: ${e}`,n)};this.getMetaInfoByCurrentFile=async()=>{var e;return this.getMetaInfoByFileName(((e=this.plugin.app.workspace.getActiveFile())==null?void 0:e.path)||"")};this.searchReferencesStartingWith=async e=>{for(let[n,r]of Se())n.startsWith(e)&&console.log(n,r)};this.searchReferencesContains=async e=>{for(let[n,r]of Se())n.contains(e)&&console.log(n,r)};this.getMetaInfoByFileName=async e=>{let n=this.plugin.app.metadataCache.getFirstLinkpathDest(e,"/");return{TFile:n,metadataCache:n?this.plugin.app.metadataCache.getFileCache(n):null,SnwTransformedCache:n?ce(n):null}};this.plugin=e}parseLinkTextToFullPath(e){return re(e)}};var Er=require("obsidian"),Tt=class{constructor(e){this.snwCommands=[{id:"SNW-ToggleActiveState",icon:"dot-network",name:"Toggle active state of SNW plugin on/off",showInRibbon:!0,callback:async()=>{this.plugin.showCountsActive=!this.plugin.showCountsActive;let e=`SNW toggled ${this.plugin.showCountsActive?`ON

`:`OFF

`}`;e+="Tabs may require reloading for this change to take effect.",new Er.Notice(e),this.plugin.toggleStateSNWMarkdownPreview(),this.plugin.toggleStateSNWLivePreview(),this.plugin.toggleStateSNWGutters()}}];this.plugin=e;for(let n of this.snwCommands)this.plugin.addCommand({id:n.id,name:n.name,icon:n.icon,callback:async()=>{await n.callback()}})}};var N=require("obsidian"),sn=class extends N.PluginSettingTab{constructor(e,n){super(e,n),this.plugin=n}display(){let{containerEl:e}=this;e.empty(),new N.Setting(e).setHeading().setName("Enable on startup"),new N.Setting(e).setName("On the desktop enable SNW at startup").addToggle(n=>{n.setValue(this.plugin.settings.enableOnStartupDesktop),n.onChange(async r=>{this.plugin.settings.enableOnStartupDesktop=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("On mobile devices enable SNW at startup").addToggle(n=>{n.setValue(this.plugin.settings.enableOnStartupMobile),n.onChange(async r=>{this.plugin.settings.enableOnStartupMobile=r,await this.plugin.saveSettings()})}),new N.Setting(e).setHeading().setName("SNW Activation"),new N.Setting(e).setName("Require modifier key to activate SNW").setDesc(`If enabled, SNW will only activate when the modifier key is pressed when hovering the mouse over an SNW counter.  
						Otherwise, SNW will activate on a mouse hover. May require reopening open files to take effect.`).addToggle(n=>{n.setValue(this.plugin.settings.requireModifierKeyToActivateSNWView),n.onChange(async r=>{this.plugin.settings.requireModifierKeyToActivateSNWView=r,await this.plugin.saveSettings()})}),new N.Setting(e).setHeading().setName("Thresholds"),new N.Setting(e).setName("Minimal required count to show counter").setDesc(`This setting defines how many references there needs to be for the reference count box to appear. May require reloading open files.
				 Currently set to: ${this.plugin.settings.minimumRefCountThreshold} references.`).addSlider(n=>n.setLimits(1,1e3,1).setValue(this.plugin.settings.minimumRefCountThreshold).onChange(async r=>{this.plugin.settings.minimumRefCountThreshold=r,await this.plugin.saveSettings()}).setDynamicTooltip()),new N.Setting(e).setName("Maximum file references to show").setDesc(`This setting defines the max amount of files with their references are displayed in the popup or sidebar.  Set to 1000 for no maximum.
				 Currently set to: ${this.plugin.settings.maxFileCountToDisplay} references. Keep in mind higher numbers can affect performance on larger vaults.`).addSlider(n=>n.setLimits(1,1e3,1).setValue(this.plugin.settings.maxFileCountToDisplay).onChange(async r=>{this.plugin.settings.maxFileCountToDisplay=r,await this.plugin.saveSettings()}).setDynamicTooltip()),new N.Setting(e).setHeading().setName("Use Obsidian's Excluded Files list (Settings > Files & Links)"),new N.Setting(e).setName("Outgoing links").setDesc("If enabled, links FROM files in the excluded folder will not be included in SNW's reference counters. May require restarting Obsidian.").addToggle(n=>{n.setValue(this.plugin.settings.enableIgnoreObsExcludeFoldersLinksFrom),n.onChange(async r=>{this.plugin.settings.enableIgnoreObsExcludeFoldersLinksFrom=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Incoming links").setDesc("If enabled, links TO files in the excluded folder will not be included in SNW's reference counters.  May require restarting Obsidian.").addToggle(n=>{n.setValue(this.plugin.settings.enableIgnoreObsExcludeFoldersLinksTo),n.onChange(async r=>{this.plugin.settings.enableIgnoreObsExcludeFoldersLinksTo=r,await this.plugin.saveSettings()})}),new N.Setting(e).setHeading().setName("Properties"),new N.Setting(e).setName("Show references in properties on Desktop").addToggle(n=>{n.setValue(this.plugin.settings.displayPropertyReferences),n.onChange(async r=>{this.plugin.settings.displayPropertyReferences=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Show references in properties on mobile").addToggle(n=>{n.setValue(this.plugin.settings.displayPropertyReferencesMobile),n.onChange(async r=>{this.plugin.settings.displayPropertyReferencesMobile=r,await this.plugin.saveSettings()})}),new N.Setting(e).setHeading().setName("View Modes"),new N.Setting(e).setName("Incoming Links Header Count").setDesc("In header of a document, show number of incoming link to that file.").addToggle(n=>{n.setValue(this.plugin.settings.displayIncomingFilesheader),n.onChange(async r=>{this.plugin.settings.displayIncomingFilesheader=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Show SNW indicators in Live Preview Editor").setDesc("While using Live Preview, Display inline of the text of documents all reference counts for links, blocks and embeds.Note: files may need to be closed and reopened for this setting to take effect.").addToggle(n=>{n.setValue(this.plugin.settings.displayInlineReferencesLivePreview),n.onChange(async r=>{this.plugin.settings.displayInlineReferencesLivePreview=r,this.plugin.toggleStateSNWLivePreview(),await this.plugin.saveSettings()})}),new N.Setting(e).setName("Show SNW indicators in Reading view ").setDesc("While in Reading View of a document, display inline of the text of documents all reference counts for links, blocks and embeds.Note: files may need to be closed and reopened for this setting to take effect.").addToggle(n=>{n.setValue(this.plugin.settings.displayInlineReferencesMarkdown),n.onChange(async r=>{this.plugin.settings.displayInlineReferencesMarkdown=r,this.plugin.toggleStateSNWMarkdownPreview(),await this.plugin.saveSettings()})}),new N.Setting(e).setName("Show SNW indicators in Source Mode ").setDesc("While in Source Mode of a document, display inline of the text of documents all reference counts for links, blocks and embeds.By default, this is turned off since the goal of Source Mode is to see the raw markdown.Note: files may need to be closed and reopened for this setting to take effect.").addToggle(n=>{n.setValue(this.plugin.settings.displayInlineReferencesInSourceMode),n.onChange(async r=>{this.plugin.settings.displayInlineReferencesInSourceMode=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Embed references in Gutter in Live Preview Mode (Desktop)").setDesc(`Displays a count of references in the gutter while in live preview. This is done only in a
					  special scenario. It has to do with the way Obsidian renders embeds, example: ![[link]] when  
					  they are on its own line. Strange New Worlds cannot embed the count in this scenario, so a hint is 
					  displayed in the gutter. It is a hack, but at least we get some information.`).addToggle(n=>{n.setValue(this.plugin.settings.displayEmbedReferencesInGutter),n.onChange(async r=>{this.plugin.settings.displayEmbedReferencesInGutter=r,this.plugin.toggleStateSNWGutters(),await this.plugin.saveSettings()})}),new N.Setting(e).setName("Embed references in Gutter in Live Preview Mode (Mobile)").setDesc("This is off by default on mobile since the gutter takes up some space in the left margin.").addToggle(n=>{n.setValue(this.plugin.settings.displayEmbedReferencesInGutterMobile),n.onChange(async r=>{this.plugin.settings.displayEmbedReferencesInGutterMobile=r,this.plugin.toggleStateSNWGutters(),await this.plugin.saveSettings()})}),new N.Setting(e).setHeading().setName("Enable reference types in Reading Mode"),e.createEl("sup",{text:"(requires reopening documents to take effect)"}),new N.Setting(e).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingBlockIdInMarkdown),n.onChange(async r=>{this.plugin.settings.enableRenderingBlockIdInMarkdown=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingEmbedsInMarkdown),n.onChange(async r=>{this.plugin.settings.enableRenderingEmbedsInMarkdown=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingLinksInMarkdown),n.onChange(async r=>{this.plugin.settings.enableRenderingLinksInMarkdown=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingHeadersInMarkdown),n.onChange(async r=>{this.plugin.settings.enableRenderingHeadersInMarkdown=r,await this.plugin.saveSettings()})}),new N.Setting(e).setHeading().setName("Enable reference types in Live Preview Mode"),e.createEl("sup",{text:"(requires reopening documents to take effect)"}),new N.Setting(e).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingBlockIdInLivePreview),n.onChange(async r=>{this.plugin.settings.enableRenderingBlockIdInLivePreview=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingEmbedsInLivePreview),n.onChange(async r=>{this.plugin.settings.enableRenderingEmbedsInLivePreview=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingLinksInLivePreview),n.onChange(async r=>{this.plugin.settings.enableRenderingLinksInLivePreview=r,await this.plugin.saveSettings()})}),new N.Setting(e).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingHeadersInLivePreview),n.onChange(async r=>{this.plugin.settings.enableRenderingHeadersInLivePreview=r,await this.plugin.saveSettings()})}),new N.Setting(e).setHeading().setName("Custom Display Settings"),new N.Setting(this.containerEl).setName("Custom Property List").setDesc("Displays properties from referenced files in the references list. The list is comma separated list of case-sensitive property names.").addText(n=>{n.setPlaceholder("Ex: Project, Summary").setValue(this.plugin.settings.displayCustomPropertyList).onChange(async r=>{this.plugin.settings.displayCustomPropertyList=r,await this.plugin.saveSettings()})})}};var to=require("obsidian");var un,W,Mr,Eo,qe,Tr,Or,Wn,Un,Hn,Vn,To,St={},Dr=[],So=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Bn=Array.isArray;function Ae(t,e){for(var n in e)t[n]=e[n];return t}function Nr(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Lo(t,e,n){var r,i,o,l={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:l[o]=e[o];if(arguments.length>2&&(l.children=arguments.length>3?un.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)l[o]===void 0&&(l[o]=t.defaultProps[o]);return ln(t,l,r,i,null)}function ln(t,e,n,r,i){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i==null?++Mr:i,__i:-1,__u:0};return i==null&&W.vnode!=null&&W.vnode(o),o}function ze(t){return t.children}function pn(t,e){this.props=t,this.context=e}function dt(t,e){if(e==null)return t.__?dt(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?dt(t):null}function Rr(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Rr(t)}}function Sr(t){(!t.__d&&(t.__d=!0)&&qe.push(t)&&!cn.__r++||Tr!==W.debounceRendering)&&((Tr=W.debounceRendering)||Or)(cn)}function cn(){var t,e,n,r,i,o,l,a;for(qe.sort(Wn);t=qe.shift();)t.__d&&(e=qe.length,r=void 0,o=(i=(n=t).__v).__e,l=[],a=[],n.__P&&((r=Ae({},i)).__v=i.__v+1,W.vnode&&W.vnode(r),jn(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[o]:null,l,o==null?dt(i):o,!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,Wr(l,r,a),r.__e!=o&&Rr(r)),qe.length>e&&qe.sort(Wn));cn.__r=0}function Ar(t,e,n,r,i,o,l,a,s,p,f){var u,g,d,h,w,v=r&&r.__k||Dr,b=e.length;for(n.__d=s,Io(n,e,v),s=n.__d,u=0;u<b;u++)(d=n.__k[u])!=null&&(g=d.__i===-1?St:v[d.__i]||St,d.__i=u,jn(t,d,g,i,o,l,a,s,p,f),h=d.__e,d.ref&&g.ref!=d.ref&&(g.ref&&$n(g.ref,null,d),f.push(d.ref,d.__c||h,d)),w==null&&h!=null&&(w=h),65536&d.__u||g.__k===d.__k?s=Fr(d,s,t):typeof d.type=="function"&&d.__d!==void 0?s=d.__d:h&&(s=h.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=s,n.__e=w}function Io(t,e,n){var r,i,o,l,a,s=e.length,p=n.length,f=p,u=0;for(t.__k=[],r=0;r<s;r++)(i=e[r])!=null&&typeof i!="boolean"&&typeof i!="function"?(l=r+u,(i=t.__k[r]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?ln(null,i,null,null,null):Bn(i)?ln(ze,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?ln(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,o=null,(a=i.__i=Mo(i,n,l,f))!==-1&&(f--,(o=n[a])&&(o.__u|=131072)),o==null||o.__v===null?(a==-1&&u--,typeof i.type!="function"&&(i.__u|=65536)):a!==l&&(a==l-1?u--:a==l+1?u++:(a>l?u--:u++,i.__u|=65536))):i=t.__k[r]=null;if(f)for(r=0;r<p;r++)(o=n[r])!=null&&!(131072&o.__u)&&(o.__e==t.__d&&(t.__d=dt(o)),Hr(o,o))}function Fr(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=Fr(r[i],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=dt(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Mo(t,e,n,r){var i=t.key,o=t.type,l=n-1,a=n+1,s=e[n];if(s===null||s&&i==s.key&&o===s.type&&!(131072&s.__u))return n;if((typeof o!="function"||o===ze||i)&&r>(s!=null&&!(131072&s.__u)?1:0))for(;l>=0||a<e.length;){if(l>=0){if((s=e[l])&&!(131072&s.__u)&&i==s.key&&o===s.type)return l;l--}if(a<e.length){if((s=e[a])&&!(131072&s.__u)&&i==s.key&&o===s.type)return a;a++}}return-1}function Lr(t,e,n){e[0]==="-"?t.setProperty(e,n==null?"":n):t[e]=n==null?"":typeof n!="number"||So.test(e)?n:n+"px"}function an(t,e,n,r,i){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Lr(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||Lr(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=Un,t.addEventListener(e,o?Vn:Hn,o)):t.removeEventListener(e,o?Vn:Hn,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n==null?"":n;break e}catch(l){}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ir(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Un++;else if(e.t<n.u)return;return W.event&&(e=W.event(e)),"handleEvent"in n?n.handleEvent(e):n(e)}}}function jn(t,e,n,r,i,o,l,a,s,p){var f,u,g,d,h,w,v,b,_,k,c,x,y,E,I,M,T=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(s=!!(32&n.__u),o=[a=e.__e=n.__e]),(f=W.__b)&&f(e);e:if(typeof T=="function")try{if(b=e.props,_="prototype"in T&&T.prototype.render,k=(f=T.contextType)&&r[f.__c],c=f?k?k.props.value:f.__:r,n.__c?v=(u=e.__c=n.__c).__=u.__E:(_?e.__c=u=new T(b,c):(e.__c=u=new pn(b,c),u.constructor=T,u.render=Do),k&&k.sub(u),u.props=b,u.state||(u.state={}),u.context=c,u.__n=r,g=u.__d=!0,u.__h=[],u._sb=[]),_&&u.__s==null&&(u.__s=u.state),_&&T.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Ae({},u.__s)),Ae(u.__s,T.getDerivedStateFromProps(b,u.__s))),d=u.props,h=u.state,u.__v=e,g)_&&T.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),_&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(_&&T.getDerivedStateFromProps==null&&b!==d&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(b,c),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(b,u.__s,c)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(u.props=b,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(O){O&&(O.__=e)}),x=0;x<u._sb.length;x++)u.__h.push(u._sb[x]);u._sb=[],u.__h.length&&l.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(b,u.__s,c),_&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(d,h,w)})}if(u.context=c,u.props=b,u.__P=t,u.__e=!1,y=W.__r,E=0,_){for(u.state=u.__s,u.__d=!1,y&&y(e),f=u.render(u.props,u.state,u.context),I=0;I<u._sb.length;I++)u.__h.push(u._sb[I]);u._sb=[]}else do u.__d=!1,y&&y(e),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++E<25);u.state=u.__s,u.getChildContext!=null&&(r=Ae(Ae({},r),u.getChildContext())),_&&!g&&u.getSnapshotBeforeUpdate!=null&&(w=u.getSnapshotBeforeUpdate(d,h)),Ar(t,Bn(M=f!=null&&f.type===ze&&f.key==null?f.props.children:f)?M:[M],e,n,r,i,o,l,a,s,p),u.base=e.__e,e.__u&=-161,u.__h.length&&l.push(u),v&&(u.__E=u.__=null)}catch(O){if(e.__v=null,s||o!=null){for(e.__u|=s?160:128;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;W.__e(O,e,n)}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Oo(n.__e,e,n,r,i,o,l,s,p);(f=W.diffed)&&f(e)}function Wr(t,e,n){e.__d=void 0;for(var r=0;r<n.length;r++)$n(n[r],n[++r],n[++r]);W.__c&&W.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(o){o.call(i)})}catch(o){W.__e(o,i.__v)}})}function Oo(t,e,n,r,i,o,l,a,s){var p,f,u,g,d,h,w,v=n.props,b=e.props,_=e.type;if(_==="svg"?i="http://www.w3.org/2000/svg":_==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(p=0;p<o.length;p++)if((d=o[p])&&"setAttribute"in d==!!_&&(_?d.localName===_:d.nodeType===3)){t=d,o[p]=null;break}}if(t==null){if(_===null)return document.createTextNode(b);t=document.createElementNS(i,_,b.is&&b),a&&(W.__m&&W.__m(e,o),a=!1),o=null}if(_===null)v===b||a&&t.data===b||(t.data=b);else{if(o=o&&un.call(t.childNodes),v=n.props||St,!a&&o!=null)for(v={},p=0;p<t.attributes.length;p++)v[(d=t.attributes[p]).name]=d.value;for(p in v)if(d=v[p],p!="children"){if(p=="dangerouslySetInnerHTML")u=d;else if(!(p in b)){if(p=="value"&&"defaultValue"in b||p=="checked"&&"defaultChecked"in b)continue;an(t,p,null,d,i)}}for(p in b)d=b[p],p=="children"?g=d:p=="dangerouslySetInnerHTML"?f=d:p=="value"?h=d:p=="checked"?w=d:a&&typeof d!="function"||v[p]===d||an(t,p,d,v[p],i);if(f)a||u&&(f.__html===u.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(u&&(t.innerHTML=""),Ar(t,Bn(g)?g:[g],e,n,r,_==="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,l,o?o[0]:n.__k&&dt(n,0),a,s),o!=null)for(p=o.length;p--;)Nr(o[p]);a||(p="value",_==="progress"&&h==null?t.removeAttribute("value"):h!==void 0&&(h!==t[p]||_==="progress"&&!h||_==="option"&&h!==v[p])&&an(t,p,h,v[p],i),p="checked",w!==void 0&&w!==t[p]&&an(t,p,w,v[p],i))}return t}function $n(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){W.__e(i,n)}}function Hr(t,e,n){var r,i;if(W.unmount&&W.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||$n(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){W.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&Hr(r[i],e,n||typeof t.type!="function");n||Nr(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function Do(t,e,n){return this.constructor(t,n)}function xe(t,e,n){var r,i,o,l;W.__&&W.__(t,e),i=(r=typeof n=="function")?null:n&&n.__k||e.__k,o=[],l=[],jn(e,t=(!r&&n||e).__k=Lo(ze,null,[t]),i||St,St,e.namespaceURI,!r&&n?[n]:i?null:e.firstChild?un.call(e.childNodes):null,o,!r&&n?n:i?i.__e:e.firstChild,r,l),Wr(o,t,l)}un=Dr.slice,W={__e:function(t,e,n,r){for(var i,o,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),l=i.__d),l)return i.__E=i}catch(a){t=a}throw t}},Mr=0,Eo=function(t){return t!=null&&t.constructor==null},pn.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ae({},this.state),typeof t=="function"&&(t=t(Ae({},n),this.props)),t&&Ae(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Sr(this))},pn.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Sr(this))},pn.prototype.render=ze,qe=[],Or=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Wn=function(t,e){return t.__v.__b-e.__v.__b},cn.__r=0,Un=0,Hn=Ir(!1),Vn=Ir(!0),To=0;var No=(t,e)=>{let n=getComputedStyle(t),r=n.position==="absolute",i=e?/(auto|scroll|hidden)/:/(auto|scroll)/;if(n.position==="fixed")return document.body;for(let o=t.parentElement;o;o=o.parentElement)if(n=getComputedStyle(o),(!r||n.position!=="static")&&i.test(n.overflow+n.overflowY+n.overflowX))return o;return document.body},fn=t=>{let e=t.querySelectorAll(".search-result-file-matched-text");for(let n of Array.from(e))if(n instanceof HTMLElement){let r=No(n,!0);r&&(r.scrollTop=n.offsetTop-r.offsetTop-r.offsetHeight/2)}};var it=require("obsidian");var Ji=require("obsidian");var mt=require("obsidian");var Lt=(t,e)=>t.substring(e.start.offset,e.end.offset),Vr=(t,e)=>t.substring(e.start.offset-e.start.col,e.end.offset),qn=(t,e)=>{try{return t.start.offset<=e.start.offset&&t.end.offset>=e.end.offset}catch(n){return!1}};var dn=class{constructor(e,{listItems:n=[],headings:r=[],sections:i=[]}){this.fileContents=e;this.getListItemIndexContaining=e=>this.listItems.findIndex(({position:n})=>qn(n,e));this.getSectionContaining=e=>this.sections.find(({position:n})=>qn(n,e));this.getListItemWithDescendants=e=>{let n=this.listItems[e],r=[n];for(let i=e+1;i<this.listItems.length;i++){let o=this.listItems[i];if(o.parent<n.position.start.line)return r;r.push(o)}return r};this.listItems=n,this.headings=r,this.sections=i}getListBreadcrumbs(e){let n=[];if(this.listItems.length===0)return n;let r=this.getListItemIndexContaining(e);if(r<0)return n;let o=this.listItems[r],l=o.parent;if(this.isTopLevelListItem(o))return n;for(let a=r-1;a>=0;a--){let s=this.listItems[a];if(s.parent<l&&(n.unshift(s),l=s.parent),this.isTopLevelListItem(s))return n}return n}getFirstSectionUnder(e){return this.sections.find(n=>n.position.start.line>e.start.line)}getHeadingContaining(e){let n=this.getHeadingIndexContaining(e);return this.headings[n]}getHeadingBreadcrumbs(e){let n=[];if(this.headings.length===0)return n;let r=s=>{let p=this.headings[s].level,f=s-1;for(let u=f;u>=0;u--){let g=this.headings[u];g.level<p&&(p=g.level,n.unshift(g))}},i=this.getHeadingIndexContaining(e);if(i>=0)return r(i),n;let l=this.getIndexOfHeadingAbove(e);if(l>=0){let s=this.headings[l];return n.unshift(s),r(l),n}return n}isTopLevelListItem(e){return e.parent<=0}getIndexOfHeadingAbove(e){return e===void 0?-1:this.headings.reduce((n,r,i)=>r.position.start.line<e.start.line?i:n,-1)}getHeadingIndexContaining(e){return e===void 0?-1:this.headings.findIndex(n=>n.position.start.line===e.start.line)}};var Ur=t=>t.map(e=>e.trim()).filter(e=>e.length>0).join(" \u27A4 "),Br=(t,e)=>Ur(e.map(n=>Lt(t,n.position)).map(n=>n.trim().replace(/^-\s+/,""))),jr=(t,e)=>{let r=e[0].position.start.col;return e.map(i=>Vr(t,i.position).slice(r)).join(`
`)},$r=t=>Ur(t.map(e=>e.heading));var Ro=0,ha=Array.isArray;function L(t,e,n,r,i,o){e||(e={});var l,a,s=e;"ref"in e&&(l=e.ref,delete e.ref);var p={type:t,props:s,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Ro,__i:-1,__u:0,__source:i,__self:o};if(typeof t=="function"&&(l=t.defaultProps))for(a in l)s[a]===void 0&&(s[a]=l[a]);return W.vnode&&W.vnode(p),p}var ae;function qr(t){ae=t}var zr=async t=>{var i,o,l,a;let e=t.reference.position!==void 0?t.reference.position.start.line.toString():"0",n=L("div",{className:"snw-ref-item-info search-result-file-match","snw-data-line-number":e,"snw-data-file-name":(o=t==null?void 0:t.sourceFile)==null?void 0:o.path.replace(`.${(i=t==null?void 0:t.sourceFile)==null?void 0:i.extension}`,""),"data-href":(a=t==null?void 0:t.sourceFile)==null?void 0:a.path.replace(`.${(l=t==null?void 0:t.sourceFile)==null?void 0:l.extension}`,""),dangerouslySetInnerHTML:{__html:(await Ao(t)).innerHTML}}),r=createDiv();return xe(n,r),r},Ao=async t=>{var g;let e=await ae.app.vault.cachedRead(t.sourceFile),n=ae.app.metadataCache.getFileCache(t.sourceFile),r=t.reference.position,i=createDiv();if(i.setAttribute("uic","uic"),(g=t.reference)!=null&&g.key)return i.innerText=`Used in property: ${t.reference.key}`,i;let o=new dn(e,n),l=o.getHeadingBreadcrumbs(r);if(l.length>0){let d=i.createDiv();d.addClass("snw-breadcrumbs"),d.createEl("span",{text:"H"}),await mt.MarkdownRenderer.render(ae.app,$r(l),d,t.sourceFile.path,ae)}let a=o.getListItemIndexContaining(r);if(a>=0){let d=o.getListBreadcrumbs(r);if(d.length>0){let v=i.createDiv();v.addClass("snw-breadcrumbs"),v.createEl("span",{text:"L"}),await mt.MarkdownRenderer.render(ae.app,Br(e,d),v,t.sourceFile.path,ae)}let h=o.getListItemWithDescendants(a),w=i.createDiv();await mt.MarkdownRenderer.render(ae.app,jr(e,h),w,t.sourceFile.path,ae)}else{let d=o.getSectionContaining(r),h="";(d==null?void 0:d.position)!==void 0&&(h=Lt(e,d.position)),/^\[\^([\w]+)\]:(.*)$/.test(h)&&(h=h.replace("[","").replace("]:","")),await mt.MarkdownRenderer.render(ae.app,h,i,t.sourceFile.path,ae)}let p=o.getHeadingContaining(r);if(p){let d=o.getFirstSectionUnder(p.position);if(d){let h=i.createDiv();await mt.MarkdownRenderer.render(ae.app,Lt(e,d.position),h,t.sourceFile.path,ae)}}let f=i.querySelectorAll("*"),u=Array.from(f).find(d=>d.textContent===t.reference.displayText);try{u.addClass("search-result-file-matched-text")}catch(d){}return i};var B="top",J="bottom",K="right",q="left",mn="auto",Fe=[B,J,K,q],Le="start",Ge="end",Gr="clippingParents",gn="viewport",gt="popper",Kr="reference",zn=Fe.reduce(function(t,e){return t.concat([e+"-"+Le,e+"-"+Ge])},[]),hn=[].concat(Fe,[mn]).reduce(function(t,e){return t.concat([e,e+"-"+Le,e+"-"+Ge])},[]),Fo="beforeRead",Wo="read",Ho="afterRead",Vo="beforeMain",Uo="main",Bo="afterMain",jo="beforeWrite",$o="write",qo="afterWrite",Yr=[Fo,Wo,Ho,Vo,Uo,Bo,jo,$o,qo];function Q(t){return t?(t.nodeName||"").toLowerCase():null}function V(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ue(t){var e=V(t).Element;return t instanceof e||t instanceof Element}function Z(t){var e=V(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ht(t){if(typeof ShadowRoot=="undefined")return!1;var e=V(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function zo(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!Z(o)||!Q(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(l){var a=i[l];a===!1?o.removeAttribute(l):o.setAttribute(l,a===!0?"":a)}))})}function Go(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},l=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=l.reduce(function(s,p){return s[p]="",s},{});!Z(i)||!Q(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(s){i.removeAttribute(s)}))})}}var It={name:"applyStyles",enabled:!0,phase:"write",fn:zo,effect:Go,requires:["computeStyles"]};function ee(t){return t.split("-")[0]}var he=Math.max,Ke=Math.min,Ie=Math.round;function vt(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Mt(){return!/^((?!chrome|android).)*safari/i.test(vt())}function fe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&Z(t)&&(i=t.offsetWidth>0&&Ie(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ie(r.height)/t.offsetHeight||1);var l=ue(t)?V(t):window,a=l.visualViewport,s=!Mt()&&n,p=(r.left+(s&&a?a.offsetLeft:0))/i,f=(r.top+(s&&a?a.offsetTop:0))/o,u=r.width/i,g=r.height/o;return{width:u,height:g,top:f,right:p+u,bottom:f+g,left:p,x:p,y:f}}function Ye(t){var e=fe(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Ot(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ht(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function oe(t){return V(t).getComputedStyle(t)}function Gn(t){return["table","td","th"].indexOf(Q(t))>=0}function te(t){return((ue(t)?t.ownerDocument:t.document)||window.document).documentElement}function Me(t){return Q(t)==="html"?t:t.assignedSlot||t.parentNode||(ht(t)?t.host:null)||te(t)}function Xr(t){return!Z(t)||oe(t).position==="fixed"?null:t.offsetParent}function Ko(t){var e=/firefox/i.test(vt()),n=/Trident/i.test(vt());if(n&&Z(t)){var r=oe(t);if(r.position==="fixed")return null}var i=Me(t);for(ht(i)&&(i=i.host);Z(i)&&["html","body"].indexOf(Q(i))<0;){var o=oe(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function ve(t){for(var e=V(t),n=Xr(t);n&&Gn(n)&&oe(n).position==="static";)n=Xr(n);return n&&(Q(n)==="html"||Q(n)==="body"&&oe(n).position==="static")?e:n||Ko(t)||e}function Xe(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Je(t,e,n){return he(t,Ke(e,n))}function Jr(t,e,n){var r=Je(t,e,n);return r>n?n:r}function Dt(){return{top:0,right:0,bottom:0,left:0}}function Nt(t){return Object.assign({},Dt(),t)}function Rt(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Yo=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Nt(typeof e!="number"?e:Rt(e,Fe))};function Xo(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,a=ee(n.placement),s=Xe(a),p=[q,K].indexOf(a)>=0,f=p?"height":"width";if(!(!o||!l)){var u=Yo(i.padding,n),g=Ye(o),d=s==="y"?B:q,h=s==="y"?J:K,w=n.rects.reference[f]+n.rects.reference[s]-l[s]-n.rects.popper[f],v=l[s]-n.rects.reference[s],b=ve(o),_=b?s==="y"?b.clientHeight||0:b.clientWidth||0:0,k=w/2-v/2,c=u[d],x=_-g[f]-u[h],y=_/2-g[f]/2+k,E=Je(c,y,x),I=s;n.modifiersData[r]=(e={},e[I]=E,e.centerOffset=E-y,e)}}function Jo(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Ot(e.elements.popper,i)&&(e.elements.arrow=i))}var Zr={name:"arrow",enabled:!0,phase:"main",fn:Xo,effect:Jo,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function de(t){return t.split("-")[1]}var Zo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qo(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ie(n*i)/i||0,y:Ie(r*i)/i||0}}function Qr(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,l=t.offsets,a=t.position,s=t.gpuAcceleration,p=t.adaptive,f=t.roundOffsets,u=t.isFixed,g=l.x,d=g===void 0?0:g,h=l.y,w=h===void 0?0:h,v=typeof f=="function"?f({x:d,y:w}):{x:d,y:w};d=v.x,w=v.y;var b=l.hasOwnProperty("x"),_=l.hasOwnProperty("y"),k=q,c=B,x=window;if(p){var y=ve(n),E="clientHeight",I="clientWidth";if(y===V(n)&&(y=te(n),oe(y).position!=="static"&&a==="absolute"&&(E="scrollHeight",I="scrollWidth")),y=y,i===B||(i===q||i===K)&&o===Ge){c=J;var M=u&&y===x&&x.visualViewport?x.visualViewport.height:y[E];w-=M-r.height,w*=s?1:-1}if(i===q||(i===B||i===J)&&o===Ge){k=K;var T=u&&y===x&&x.visualViewport?x.visualViewport.width:y[I];d-=T-r.width,d*=s?1:-1}}var O=Object.assign({position:a},p&&Zo),A=f===!0?Qo({x:d,y:w},V(n)):{x:d,y:w};if(d=A.x,w=A.y,s){var S;return Object.assign({},O,(S={},S[c]=_?"0":"",S[k]=b?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+d+"px, "+w+"px)":"translate3d("+d+"px, "+w+"px, 0)",S))}return Object.assign({},O,(e={},e[c]=_?w+"px":"",e[k]=b?d+"px":"",e.transform="",e))}function es(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,l=o===void 0?!0:o,a=n.roundOffsets,s=a===void 0?!0:a,p={placement:ee(e.placement),variation:de(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Qr(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:s})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Qr(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var ei={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:es,data:{}};var vn={passive:!0};function ts(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,l=r.resize,a=l===void 0?!0:l,s=V(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&p.forEach(function(f){f.addEventListener("scroll",n.update,vn)}),a&&s.addEventListener("resize",n.update,vn),function(){o&&p.forEach(function(f){f.removeEventListener("scroll",n.update,vn)}),a&&s.removeEventListener("resize",n.update,vn)}}var ti={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ts,data:{}};var ns={left:"right",right:"left",bottom:"top",top:"bottom"};function yt(t){return t.replace(/left|right|bottom|top/g,function(e){return ns[e]})}var rs={start:"end",end:"start"};function yn(t){return t.replace(/start|end/g,function(e){return rs[e]})}function Ze(t){var e=V(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Qe(t){return fe(te(t)).left+Ze(t).scrollLeft}function Kn(t,e){var n=V(t),r=te(t),i=n.visualViewport,o=r.clientWidth,l=r.clientHeight,a=0,s=0;if(i){o=i.width,l=i.height;var p=Mt();(p||!p&&e==="fixed")&&(a=i.offsetLeft,s=i.offsetTop)}return{width:o,height:l,x:a+Qe(t),y:s}}function Yn(t){var e,n=te(t),r=Ze(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=he(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=he(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Qe(t),s=-r.scrollTop;return oe(i||n).direction==="rtl"&&(a+=he(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:l,x:a,y:s}}function et(t){var e=oe(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function wn(t){return["html","body","#document"].indexOf(Q(t))>=0?t.ownerDocument.body:Z(t)&&et(t)?t:wn(Me(t))}function We(t,e){var n;e===void 0&&(e=[]);var r=wn(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=V(r),l=i?[o].concat(o.visualViewport||[],et(r)?r:[]):r,a=e.concat(l);return i?a:a.concat(We(Me(l)))}function wt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function is(t,e){var n=fe(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function ni(t,e,n){return e===gn?wt(Kn(t,n)):ue(e)?is(e,n):wt(Yn(te(t)))}function os(t){var e=We(Me(t)),n=["absolute","fixed"].indexOf(oe(t).position)>=0,r=n&&Z(t)?ve(t):t;return ue(r)?e.filter(function(i){return ue(i)&&Ot(i,r)&&Q(i)!=="body"}):[]}function Xn(t,e,n,r){var i=e==="clippingParents"?os(t):[].concat(e),o=[].concat(i,[n]),l=o[0],a=o.reduce(function(s,p){var f=ni(t,p,r);return s.top=he(f.top,s.top),s.right=Ke(f.right,s.right),s.bottom=Ke(f.bottom,s.bottom),s.left=he(f.left,s.left),s},ni(t,l,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function At(t){var e=t.reference,n=t.element,r=t.placement,i=r?ee(r):null,o=r?de(r):null,l=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,s;switch(i){case B:s={x:l,y:e.y-n.height};break;case J:s={x:l,y:e.y+e.height};break;case K:s={x:e.x+e.width,y:a};break;case q:s={x:e.x-n.width,y:a};break;default:s={x:e.x,y:e.y}}var p=i?Xe(i):null;if(p!=null){var f=p==="y"?"height":"width";switch(o){case Le:s[p]=s[p]-(e[f]/2-n[f]/2);break;case Ge:s[p]=s[p]+(e[f]/2-n[f]/2);break;default:}}return s}function ye(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,l=o===void 0?t.strategy:o,a=n.boundary,s=a===void 0?Gr:a,p=n.rootBoundary,f=p===void 0?gn:p,u=n.elementContext,g=u===void 0?gt:u,d=n.altBoundary,h=d===void 0?!1:d,w=n.padding,v=w===void 0?0:w,b=Nt(typeof v!="number"?v:Rt(v,Fe)),_=g===gt?Kr:gt,k=t.rects.popper,c=t.elements[h?_:g],x=Xn(ue(c)?c:c.contextElement||te(t.elements.popper),s,f,l),y=fe(t.elements.reference),E=At({reference:y,element:k,strategy:"absolute",placement:i}),I=wt(Object.assign({},k,E)),M=g===gt?I:y,T={top:x.top-M.top+b.top,bottom:M.bottom-x.bottom+b.bottom,left:x.left-M.left+b.left,right:M.right-x.right+b.right},O=t.modifiersData.offset;if(g===gt&&O){var A=O[i];Object.keys(T).forEach(function(S){var U=[K,J].indexOf(S)>=0?1:-1,ne=[B,J].indexOf(S)>=0?"y":"x";T[S]+=A[ne]*U})}return T}function Jn(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,l=n.padding,a=n.flipVariations,s=n.allowedAutoPlacements,p=s===void 0?hn:s,f=de(r),u=f?a?zn:zn.filter(function(h){return de(h)===f}):Fe,g=u.filter(function(h){return p.indexOf(h)>=0});g.length===0&&(g=u);var d=g.reduce(function(h,w){return h[w]=ye(t,{placement:w,boundary:i,rootBoundary:o,padding:l})[ee(w)],h},{});return Object.keys(d).sort(function(h,w){return d[h]-d[w]})}function ss(t){if(ee(t)===mn)return[];var e=yt(t);return[yn(t),e,yn(e)]}function as(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,l=n.altAxis,a=l===void 0?!0:l,s=n.fallbackPlacements,p=n.padding,f=n.boundary,u=n.rootBoundary,g=n.altBoundary,d=n.flipVariations,h=d===void 0?!0:d,w=n.allowedAutoPlacements,v=e.options.placement,b=ee(v),_=b===v,k=s||(_||!h?[yt(v)]:ss(v)),c=[v].concat(k).reduce(function(Ce,ge){return Ce.concat(ee(ge)===mn?Jn(e,{placement:ge,boundary:f,rootBoundary:u,padding:p,flipVariations:h,allowedAutoPlacements:w}):ge)},[]),x=e.rects.reference,y=e.rects.popper,E=new Map,I=!0,M=c[0],T=0;T<c.length;T++){var O=c[T],A=ee(O),S=de(O)===Le,U=[B,J].indexOf(A)>=0,ne=U?"width":"height",X=ye(e,{placement:O,boundary:f,rootBoundary:u,altBoundary:g,padding:p}),j=U?S?K:q:S?J:B;x[ne]>y[ne]&&(j=yt(j));var H=yt(j),me=[];if(o&&me.push(X[A]<=0),a&&me.push(X[j]<=0,X[H]<=0),me.every(function(Ce){return Ce})){M=O,I=!1;break}E.set(O,me)}if(I)for(var D=h?3:1,G=function(ge){var Pe=c.find(function(lt){var Ee=E.get(lt);if(Ee)return Ee.slice(0,ge).every(function(pt){return pt})});if(Pe)return M=Pe,"break"},_e=D;_e>0;_e--){var Ue=G(_e);if(Ue==="break")break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}}var ri={name:"flip",enabled:!0,phase:"main",fn:as,requiresIfExists:["offset"],data:{_skip:!1}};function ii(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function oi(t){return[B,K,J,q].some(function(e){return t[e]>=0})}function ls(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,l=ye(e,{elementContext:"reference"}),a=ye(e,{altBoundary:!0}),s=ii(l,r),p=ii(a,i,o),f=oi(s),u=oi(p);e.modifiersData[n]={referenceClippingOffsets:s,popperEscapeOffsets:p,isReferenceHidden:f,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":u})}var si={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ls};function ps(t,e,n){var r=ee(t),i=[q,B].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],a=o[1];return l=l||0,a=(a||0)*i,[q,K].indexOf(r)>=0?{x:a,y:l}:{x:l,y:a}}function cs(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,l=hn.reduce(function(f,u){return f[u]=ps(u,e.rects,o),f},{}),a=l[e.placement],s=a.x,p=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=s,e.modifiersData.popperOffsets.y+=p),e.modifiersData[r]=l}var ai={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cs};function us(t){var e=t.state,n=t.name;e.modifiersData[n]=At({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var li={name:"popperOffsets",enabled:!0,phase:"read",fn:us,data:{}};function Zn(t){return t==="x"?"y":"x"}function fs(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,l=n.altAxis,a=l===void 0?!1:l,s=n.boundary,p=n.rootBoundary,f=n.altBoundary,u=n.padding,g=n.tether,d=g===void 0?!0:g,h=n.tetherOffset,w=h===void 0?0:h,v=ye(e,{boundary:s,rootBoundary:p,padding:u,altBoundary:f}),b=ee(e.placement),_=de(e.placement),k=!_,c=Xe(b),x=Zn(c),y=e.modifiersData.popperOffsets,E=e.rects.reference,I=e.rects.popper,M=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,T=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(y){if(o){var S,U=c==="y"?B:q,ne=c==="y"?J:K,X=c==="y"?"height":"width",j=y[c],H=j+v[U],me=j-v[ne],D=d?-I[X]/2:0,G=_===Le?E[X]:I[X],_e=_===Le?-I[X]:-E[X],Ue=e.elements.arrow,Ce=d&&Ue?Ye(Ue):{width:0,height:0},ge=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Dt(),Pe=ge[U],lt=ge[ne],Ee=Je(0,E[X],Ce[X]),pt=k?E[X]/2-D-Ee-Pe-T.mainAxis:G-Ee-Pe-T.mainAxis,Ne=k?-E[X]/2+D+Ee+lt+T.mainAxis:_e+Ee+lt+T.mainAxis,ct=e.elements.arrow&&ve(e.elements.arrow),zt=ct?c==="y"?ct.clientTop||0:ct.clientLeft||0:0,_t=(S=O==null?void 0:O[c])!=null?S:0,Gt=j+pt-_t-zt,Kt=j+Ne-_t,xt=Je(d?Ke(H,Gt):H,j,d?he(me,Kt):me);y[c]=xt,A[c]=xt-j}if(a){var kt,Yt=c==="x"?B:q,Xt=c==="x"?J:K,Te=y[x],Re=x==="y"?"height":"width",Ct=Te+v[Yt],Be=Te-v[Xt],Pt=[B,q].indexOf(b)!==-1,Jt=(kt=O==null?void 0:O[x])!=null?kt:0,Zt=Pt?Ct:Te-E[Re]-I[Re]-Jt+T.altAxis,Qt=Pt?Te+E[Re]+I[Re]-Jt-T.altAxis:Be,en=d&&Pt?Jr(Zt,Te,Qt):Je(d?Zt:Ct,Te,d?Qt:Be);y[x]=en,A[x]=en-Te}e.modifiersData[r]=A}}var pi={name:"preventOverflow",enabled:!0,phase:"main",fn:fs,requiresIfExists:["offset"]};function Qn(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function er(t){return t===V(t)||!Z(t)?Ze(t):Qn(t)}function ds(t){var e=t.getBoundingClientRect(),n=Ie(e.width)/t.offsetWidth||1,r=Ie(e.height)/t.offsetHeight||1;return n!==1||r!==1}function tr(t,e,n){n===void 0&&(n=!1);var r=Z(e),i=Z(e)&&ds(e),o=te(e),l=fe(t,i,n),a={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(r||!r&&!n)&&((Q(e)!=="body"||et(o))&&(a=er(e)),Z(e)?(s=fe(e,!0),s.x+=e.clientLeft,s.y+=e.clientTop):o&&(s.x=Qe(o))),{x:l.left+a.scrollLeft-s.x,y:l.top+a.scrollTop-s.y,width:l.width,height:l.height}}function ms(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(a){if(!n.has(a)){var s=e.get(a);s&&i(s)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function nr(t){var e=ms(t);return Yr.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function rr(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function ir(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var ci={placement:"bottom",modifiers:[],strategy:"absolute"};function ui(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function fi(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?ci:i;return function(a,s,p){p===void 0&&(p=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},ci,o),modifiersData:{},elements:{reference:a,popper:s},attributes:{},styles:{}},u=[],g=!1,d={state:f,setOptions:function(b){var _=typeof b=="function"?b(f.options):b;w(),f.options=Object.assign({},o,f.options,_),f.scrollParents={reference:ue(a)?We(a):a.contextElement?We(a.contextElement):[],popper:We(s)};var k=nr(ir([].concat(r,f.options.modifiers)));return f.orderedModifiers=k.filter(function(c){return c.enabled}),h(),d.update()},forceUpdate:function(){if(!g){var b=f.elements,_=b.reference,k=b.popper;if(ui(_,k)){f.rects={reference:tr(_,ve(k),f.options.strategy==="fixed"),popper:Ye(k)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(T){return f.modifiersData[T.name]=Object.assign({},T.data)});for(var c=0;c<f.orderedModifiers.length;c++){if(f.reset===!0){f.reset=!1,c=-1;continue}var x=f.orderedModifiers[c],y=x.fn,E=x.options,I=E===void 0?{}:E,M=x.name;typeof y=="function"&&(f=y({state:f,options:I,name:M,instance:d})||f)}}}},update:rr(function(){return new Promise(function(v){d.forceUpdate(),v(f)})}),destroy:function(){w(),g=!0}};if(!ui(a,s))return d;d.setOptions(p).then(function(v){!g&&p.onFirstUpdate&&p.onFirstUpdate(v)});function h(){f.orderedModifiers.forEach(function(v){var b=v.name,_=v.options,k=_===void 0?{}:_,c=v.effect;if(typeof c=="function"){var x=c({state:f,name:b,instance:d,options:k}),y=function(){};u.push(x||y)}})}function w(){u.forEach(function(v){return v()}),u=[]}return d}}var gs=[ti,li,ei,It,ai,ri,pi,Zr,si],or=fi({defaultModifiers:gs});var hs="tippy-box",xi="tippy-content",vs="tippy-backdrop",ki="tippy-arrow",Ci="tippy-svg-arrow",tt={passive:!0,capture:!0},Pi=function(){return document.body};function sr(t,e,n){if(Array.isArray(t)){var r=t[e];return r==null?Array.isArray(n)?n[e]:n:r}return t}function ur(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Ei(t,e){return typeof t=="function"?t.apply(void 0,e):t}function di(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function ys(t){return t.split(/\s+/).filter(Boolean)}function bt(t){return[].concat(t)}function mi(t,e){t.indexOf(e)===-1&&t.push(e)}function ws(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function bs(t){return t.split("-")[0]}function xn(t){return[].slice.call(t)}function gi(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Ft(){return document.createElement("div")}function kn(t){return["Element","Fragment"].some(function(e){return ur(t,e)})}function _s(t){return ur(t,"NodeList")}function xs(t){return ur(t,"MouseEvent")}function Ti(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function ks(t){return kn(t)?[t]:_s(t)?xn(t):Array.isArray(t)?t:xn(document.querySelectorAll(t))}function ar(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function hi(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function Cs(t){var e,n=bt(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Ps(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,l=i.popperState,a=i.props,s=a.interactiveBorder,p=bs(l.placement),f=l.modifiersData.offset;if(!f)return!0;var u=p==="bottom"?f.top.y:0,g=p==="top"?f.bottom.y:0,d=p==="right"?f.left.x:0,h=p==="left"?f.right.x:0,w=o.top-r+u>s,v=r-o.bottom-g>s,b=o.left-n+d>s,_=n-o.right-h>s;return w||v||b||_})}function lr(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function vi(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var ke={isTouch:!1},yi=0;function Es(){ke.isTouch||(ke.isTouch=!0,window.performance&&document.addEventListener("mousemove",Si))}function Si(){var t=performance.now();t-yi<20&&(ke.isTouch=!1,document.removeEventListener("mousemove",Si)),yi=t}function Ts(){var t=document.activeElement;if(Ti(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Ss(){document.addEventListener("touchstart",Es,tt),window.addEventListener("blur",Ts)}var Ls=typeof window!="undefined"&&typeof document!="undefined",Is=Ls?!!window.msCrypto:!1;var Ms={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Os={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},we=Object.assign({appendTo:Pi,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Ms,Os),Ds=Object.keys(we),Ns=function(e){var n=Object.keys(e);n.forEach(function(r){we[r]=e[r]})};function Li(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,l=i.defaultValue;if(o){var a;r[o]=t[o]!==void 0?t[o]:(a=we[o])!=null?a:l}return r},{});return Object.assign({},t,n)}function Rs(t,e){var n=e?Object.keys(Li(Object.assign({},we,{plugins:e}))):Ds,r=n.reduce(function(i,o){var l=(t.getAttribute("data-tippy-"+o)||"").trim();if(!l)return i;if(o==="content")i[o]=l;else try{i[o]=JSON.parse(l)}catch(a){i[o]=l}return i},{});return r}function wi(t,e){var n=Object.assign({},e,{content:Ei(e.content,[t])},e.ignoreAttributes?{}:Rs(t,e.plugins));return n.aria=Object.assign({},we.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var As=function(){return"innerHTML"};function pr(t,e){t[As()]=e}function bi(t){var e=Ft();return t===!0?e.className=ki:(e.className=Ci,kn(t)?e.appendChild(t):pr(e,t)),e}function _i(t,e){kn(e.content)?(pr(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?pr(t,e.content):t.textContent=e.content)}function cr(t){var e=t.firstElementChild,n=xn(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(xi)}),arrow:n.find(function(r){return r.classList.contains(ki)||r.classList.contains(Ci)}),backdrop:n.find(function(r){return r.classList.contains(vs)})}}function Ii(t){var e=Ft(),n=Ft();n.className=hs,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Ft();r.className=xi,r.setAttribute("data-state","hidden"),_i(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,l){var a=cr(e),s=a.box,p=a.content,f=a.arrow;l.theme?s.setAttribute("data-theme",l.theme):s.removeAttribute("data-theme"),typeof l.animation=="string"?s.setAttribute("data-animation",l.animation):s.removeAttribute("data-animation"),l.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?s.setAttribute("role",l.role):s.removeAttribute("role"),(o.content!==l.content||o.allowHTML!==l.allowHTML)&&_i(p,t.props),l.arrow?f?o.arrow!==l.arrow&&(s.removeChild(f),s.appendChild(bi(l.arrow))):s.appendChild(bi(l.arrow)):f&&s.removeChild(f)}return{popper:e,onUpdate:i}}Ii.$$tippy=!0;var Fs=1,bn=[],_n=[];function Ws(t,e){var n=wi(t,Object.assign({},we,Li(gi(e)))),r,i,o,l=!1,a=!1,s=!1,p=!1,f,u,g,d=[],h=di(Gt,n.interactiveDebounce),w,v=Fs++,b=null,_=ws(n.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},c={id:v,reference:t,popper:Ft(),popperInstance:b,props:n,state:k,plugins:_,clearDelayTimeouts:Zt,setProps:Qt,setContent:en,show:mo,hide:go,hideWithInteractivity:ho,enable:Pt,disable:Jt,unmount:vo,destroy:yo};if(!n.render)return c;var x=n.render(c),y=x.popper,E=x.onUpdate;y.setAttribute("data-tippy-root",""),y.id="tippy-"+c.id,c.popper=y,t._tippy=c,y._tippy=c;var I=_.map(function(m){return m.fn(c)}),M=t.hasAttribute("aria-expanded");return ct(),D(),j(),H("onCreate",[c]),n.showOnCreate&&Ct(),y.addEventListener("mouseenter",function(){c.props.interactive&&c.state.isVisible&&c.clearDelayTimeouts()}),y.addEventListener("mouseleave",function(){c.props.interactive&&c.props.trigger.indexOf("mouseenter")>=0&&U().addEventListener("mousemove",h)}),c;function T(){var m=c.props.touch;return Array.isArray(m)?m:[m,0]}function O(){return T()[0]==="hold"}function A(){var m;return!!((m=c.props.render)!=null&&m.$$tippy)}function S(){return w||t}function U(){var m=S().parentNode;return m?Cs(m):document}function ne(){return cr(y)}function X(m){return c.state.isMounted&&!c.state.isVisible||ke.isTouch||f&&f.type==="focus"?0:sr(c.props.delay,m?0:1,we.delay)}function j(m){m===void 0&&(m=!1),y.style.pointerEvents=c.props.interactive&&!m?"":"none",y.style.zIndex=""+c.props.zIndex}function H(m,C,P){if(P===void 0&&(P=!0),I.forEach(function(R){R[m]&&R[m].apply(R,C)}),P){var F;(F=c.props)[m].apply(F,C)}}function me(){var m=c.props.aria;if(m.content){var C="aria-"+m.content,P=y.id,F=bt(c.props.triggerTarget||t);F.forEach(function(R){var ie=R.getAttribute(C);if(c.state.isVisible)R.setAttribute(C,ie?ie+" "+P:P);else{var pe=ie&&ie.replace(P,"").trim();pe?R.setAttribute(C,pe):R.removeAttribute(C)}})}}function D(){if(!(M||!c.props.aria.expanded)){var m=bt(c.props.triggerTarget||t);m.forEach(function(C){c.props.interactive?C.setAttribute("aria-expanded",c.state.isVisible&&C===S()?"true":"false"):C.removeAttribute("aria-expanded")})}}function G(){U().removeEventListener("mousemove",h),bn=bn.filter(function(m){return m!==h})}function _e(m){if(!(ke.isTouch&&(s||m.type==="mousedown"))){var C=m.composedPath&&m.composedPath()[0]||m.target;if(!(c.props.interactive&&vi(y,C))){if(bt(c.props.triggerTarget||t).some(function(P){return vi(P,C)})){if(ke.isTouch||c.state.isVisible&&c.props.trigger.indexOf("click")>=0)return}else H("onClickOutside",[c,m]);c.props.hideOnClick===!0&&(c.clearDelayTimeouts(),c.hide(),a=!0,setTimeout(function(){a=!1}),c.state.isMounted||Pe())}}}function Ue(){s=!0}function Ce(){s=!1}function ge(){var m=U();m.addEventListener("mousedown",_e,!0),m.addEventListener("touchend",_e,tt),m.addEventListener("touchstart",Ce,tt),m.addEventListener("touchmove",Ue,tt)}function Pe(){var m=U();m.removeEventListener("mousedown",_e,!0),m.removeEventListener("touchend",_e,tt),m.removeEventListener("touchstart",Ce,tt),m.removeEventListener("touchmove",Ue,tt)}function lt(m,C){pt(m,function(){!c.state.isVisible&&y.parentNode&&y.parentNode.contains(y)&&C()})}function Ee(m,C){pt(m,C)}function pt(m,C){var P=ne().box;function F(R){R.target===P&&(lr(P,"remove",F),C())}if(m===0)return C();lr(P,"remove",u),lr(P,"add",F),u=F}function Ne(m,C,P){P===void 0&&(P=!1);var F=bt(c.props.triggerTarget||t);F.forEach(function(R){R.addEventListener(m,C,P),d.push({node:R,eventType:m,handler:C,options:P})})}function ct(){O()&&(Ne("touchstart",_t,{passive:!0}),Ne("touchend",Kt,{passive:!0})),ys(c.props.trigger).forEach(function(m){if(m!=="manual")switch(Ne(m,_t),m){case"mouseenter":Ne("mouseleave",Kt);break;case"focus":Ne(Is?"focusout":"blur",xt);break;case"focusin":Ne("focusout",xt);break}})}function zt(){d.forEach(function(m){var C=m.node,P=m.eventType,F=m.handler,R=m.options;C.removeEventListener(P,F,R)}),d=[]}function _t(m){var C,P=!1;if(!(!c.state.isEnabled||kt(m)||a)){var F=((C=f)==null?void 0:C.type)==="focus";f=m,w=m.currentTarget,D(),!c.state.isVisible&&xs(m)&&bn.forEach(function(R){return R(m)}),m.type==="click"&&(c.props.trigger.indexOf("mouseenter")<0||l)&&c.props.hideOnClick!==!1&&c.state.isVisible?P=!0:Ct(m),m.type==="click"&&(l=!P),P&&!F&&Be(m)}}function Gt(m){var C=m.target,P=S().contains(C)||y.contains(C);if(!(m.type==="mousemove"&&P)){var F=Re().concat(y).map(function(R){var ie,pe=R._tippy,ut=(ie=pe.popperInstance)==null?void 0:ie.state;return ut?{popperRect:R.getBoundingClientRect(),popperState:ut,props:n}:null}).filter(Boolean);Ps(F,m)&&(G(),Be(m))}}function Kt(m){var C=kt(m)||c.props.trigger.indexOf("click")>=0&&l;if(!C){if(c.props.interactive){c.hideWithInteractivity(m);return}Be(m)}}function xt(m){c.props.trigger.indexOf("focusin")<0&&m.target!==S()||c.props.interactive&&m.relatedTarget&&y.contains(m.relatedTarget)||Be(m)}function kt(m){return ke.isTouch?O()!==m.type.indexOf("touch")>=0:!1}function Yt(){Xt();var m=c.props,C=m.popperOptions,P=m.placement,F=m.offset,R=m.getReferenceClientRect,ie=m.moveTransition,pe=A()?cr(y).arrow:null,ut=R?{getBoundingClientRect:R,contextElement:R.contextElement||S()}:t,_r={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(tn){var ft=tn.state;if(A()){var wo=ne(),Rn=wo.box;["placement","reference-hidden","escaped"].forEach(function(nn){nn==="placement"?Rn.setAttribute("data-placement",ft.placement):ft.attributes.popper["data-popper-"+nn]?Rn.setAttribute("data-"+nn,""):Rn.removeAttribute("data-"+nn)}),ft.attributes.popper={}}}},je=[{name:"offset",options:{offset:F}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ie}},_r];A()&&pe&&je.push({name:"arrow",options:{element:pe,padding:3}}),je.push.apply(je,(C==null?void 0:C.modifiers)||[]),c.popperInstance=or(ut,y,Object.assign({},C,{placement:P,onFirstUpdate:g,modifiers:je}))}function Xt(){c.popperInstance&&(c.popperInstance.destroy(),c.popperInstance=null)}function Te(){var m=c.props.appendTo,C,P=S();c.props.interactive&&m===Pi||m==="parent"?C=P.parentNode:C=Ei(m,[P]),C.contains(y)||C.appendChild(y),c.state.isMounted=!0,Yt()}function Re(){return xn(y.querySelectorAll("[data-tippy-root]"))}function Ct(m){c.clearDelayTimeouts(),m&&H("onTrigger",[c,m]),ge();var C=X(!0),P=T(),F=P[0],R=P[1];ke.isTouch&&F==="hold"&&R&&(C=R),C?r=setTimeout(function(){c.show()},C):c.show()}function Be(m){if(c.clearDelayTimeouts(),H("onUntrigger",[c,m]),!c.state.isVisible){Pe();return}if(!(c.props.trigger.indexOf("mouseenter")>=0&&c.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(m.type)>=0&&l)){var C=X(!1);C?i=setTimeout(function(){c.state.isVisible&&c.hide()},C):o=requestAnimationFrame(function(){c.hide()})}}function Pt(){c.state.isEnabled=!0}function Jt(){c.hide(),c.state.isEnabled=!1}function Zt(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Qt(m){if(!c.state.isDestroyed){H("onBeforeUpdate",[c,m]),zt();var C=c.props,P=wi(t,Object.assign({},C,gi(m),{ignoreAttributes:!0}));c.props=P,ct(),C.interactiveDebounce!==P.interactiveDebounce&&(G(),h=di(Gt,P.interactiveDebounce)),C.triggerTarget&&!P.triggerTarget?bt(C.triggerTarget).forEach(function(F){F.removeAttribute("aria-expanded")}):P.triggerTarget&&t.removeAttribute("aria-expanded"),D(),j(),E&&E(C,P),c.popperInstance&&(Yt(),Re().forEach(function(F){requestAnimationFrame(F._tippy.popperInstance.forceUpdate)})),H("onAfterUpdate",[c,m])}}function en(m){c.setProps({content:m})}function mo(){var m=c.state.isVisible,C=c.state.isDestroyed,P=!c.state.isEnabled,F=ke.isTouch&&!c.props.touch,R=sr(c.props.duration,0,we.duration);if(!(m||C||P||F)&&!S().hasAttribute("disabled")&&(H("onShow",[c],!1),c.props.onShow(c)!==!1)){if(c.state.isVisible=!0,A()&&(y.style.visibility="visible"),j(),ge(),c.state.isMounted||(y.style.transition="none"),A()){var ie=ne(),pe=ie.box,ut=ie.content;ar([pe,ut],0)}g=function(){var je;if(!(!c.state.isVisible||p)){if(p=!0,y.offsetHeight,y.style.transition=c.props.moveTransition,A()&&c.props.animation){var Nn=ne(),tn=Nn.box,ft=Nn.content;ar([tn,ft],R),hi([tn,ft],"visible")}me(),D(),mi(_n,c),(je=c.popperInstance)==null||je.forceUpdate(),H("onMount",[c]),c.props.animation&&A()&&Ee(R,function(){c.state.isShown=!0,H("onShown",[c])})}},Te()}}function go(){var m=!c.state.isVisible,C=c.state.isDestroyed,P=!c.state.isEnabled,F=sr(c.props.duration,1,we.duration);if(!(m||C||P)&&(H("onHide",[c],!1),c.props.onHide(c)!==!1)){if(c.state.isVisible=!1,c.state.isShown=!1,p=!1,l=!1,A()&&(y.style.visibility="hidden"),G(),Pe(),j(!0),A()){var R=ne(),ie=R.box,pe=R.content;c.props.animation&&(ar([ie,pe],F),hi([ie,pe],"hidden"))}me(),D(),c.props.animation?A()&&lt(F,c.unmount):c.unmount()}}function ho(m){U().addEventListener("mousemove",h),mi(bn,h),h(m)}function vo(){c.state.isVisible&&c.hide(),c.state.isMounted&&(Xt(),Re().forEach(function(m){m._tippy.unmount()}),y.parentNode&&y.parentNode.removeChild(y),_n=_n.filter(function(m){return m!==c}),c.state.isMounted=!1,H("onHidden",[c]))}function yo(){c.state.isDestroyed||(c.clearDelayTimeouts(),c.unmount(),zt(),delete t._tippy,c.state.isDestroyed=!0,H("onDestroy",[c]))}}function Wt(t,e){e===void 0&&(e={});var n=we.plugins.concat(e.plugins||[]);Ss();var r=Object.assign({},e,{plugins:n}),i=ks(t);if(0)var o,l;var a=i.reduce(function(s,p){var f=p&&Ws(p,r);return f&&s.push(f),s},[]);return kn(t)?a[0]:a}Wt.defaultProps=we;Wt.setDefaultProps=Ns;Wt.currentInput=ke;var Mi=function(e){var n=e===void 0?{}:e,r=n.exclude,i=n.duration;_n.forEach(function(o){var l=!1;if(r&&(l=Ti(r)?o.reference===r:o.popper===r.popper),!l){var a=o.props.duration;o.setProps({duration:i}),o.hide(),o.state.isDestroyed||o.setProps({duration:a})}})},_u=Object.assign({},It,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Wt.setDefaultProps({render:Ii});var Cn=Wt;var Oi=()=>L("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-more-horizontal",children:[L("title",{children:"More details icon"}),L("circle",{cx:"12",cy:"12",r:"1"}),L("circle",{cx:"19",cy:"12",r:"1"}),L("circle",{cx:"5",cy:"12",r:"1"})]});var Ht,z,fr,Di,En=0,Ui=[],Y=W,Ni=Y.__b,Ri=Y.__r,Ai=Y.diffed,Fi=Y.__c,Wi=Y.unmount,Hi=Y.__;function mr(t,e){Y.__h&&Y.__h(z,t,En||e),En=0;var n=z.__H||(z.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Bi(t){return En=1,Hs(zi,t)}function Hs(t,e,n){var r=mr(Ht++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):zi(void 0,e),function(a){var s=r.__N?r.__N[0]:r.__[0],p=r.t(s,a);s!==p&&(r.__N=[p,r.__[1]],r.__c.setState({}))}],r.__c=z,!z.u)){var i=function(a,s,p){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(g){return!!g.__c});if(f.every(function(g){return!g.__N}))return!o||o.call(this,a,s,p);var u=r.__c.props!==a;return f.forEach(function(g){if(g.__N){var d=g.__[0];g.__=g.__N,g.__N=void 0,d!==g.__[0]&&(u=!0)}}),o&&o.call(this,a,s,p)||u};z.u=!0;var o=z.shouldComponentUpdate,l=z.componentWillUpdate;z.componentWillUpdate=function(a,s,p){if(this.__e){var f=o;o=void 0,i(a,s,p),o=f}l&&l.call(this,a,s,p)},z.shouldComponentUpdate=i}return r.__N||r.__}function ji(t,e){var n=mr(Ht++,3);!Y.__s&&qi(n.__H,e)&&(n.__=t,n.i=e,z.__H.__h.push(n))}function $i(t){return En=5,Vs(function(){return{current:t}},[])}function Vs(t,e){var n=mr(Ht++,7);return qi(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Us(){for(var t;t=Ui.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Pn),t.__H.__h.forEach(dr),t.__H.__h=[]}catch(e){t.__H.__h=[],Y.__e(e,t.__v)}}Y.__b=function(t){z=null,Ni&&Ni(t)},Y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Hi&&Hi(t,e)},Y.__r=function(t){Ri&&Ri(t),Ht=0;var e=(z=t.__c).__H;e&&(fr===z?(e.__h=[],z.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(Pn),e.__h.forEach(dr),e.__h=[],Ht=0)),fr=z},Y.diffed=function(t){Ai&&Ai(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ui.push(e)!==1&&Di===Y.requestAnimationFrame||((Di=Y.requestAnimationFrame)||Bs)(Us)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),fr=z=null},Y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Pn),n.__h=n.__h.filter(function(r){return!r.__||dr(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Y.__e(r,n.__v)}}),Fi&&Fi(t,e)},Y.unmount=function(t){Wi&&Wi(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Pn(r)}catch(i){e=i}}),n.__H=void 0,e&&Y.__e(e,n.__v))};var Vi=typeof requestAnimationFrame=="function";function Bs(t){var e,n=function(){clearTimeout(r),Vi&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Vi&&(e=requestAnimationFrame(n))}function Pn(t){var e=z,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),z=e}function dr(t){var e=z;t.__c=t.__(),z=e}function qi(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function zi(t,e){return typeof e=="function"?e(t):e}var Gi={"name-asc":{label:"Name",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-a-z"><path d="m3 16 4 4 4-4"/><path d="M7 20V4"/><path d="M20 8h-5"/><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"/><path d="M15 14h5l-5 6h5"/></svg>'},"name-desc":{label:"Name",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-z-a"><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/><path d="M15 4h5l-5 6h5"/><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"/><path d="M20 18h-5"/></svg>'},"mtime-asc":{label:"Date",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-0-1"><path d="m3 16 4 4 4-4"/><path d="M7 20V4"/><rect x="15" y="4" width="4" height="6" ry="2"/><path d="M17 20v-6h-2"/><path d="M15 20h4"/></svg>'},"mtime-desc":{label:"Date",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-1-0"><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/><path d="M17 10V4h-2"/><path d="M15 10h4"/><rect x="15" y="14" width="4" height="6" ry="2"/></svg>'}},Ki=({plugin:t,onChange:e})=>{let[n,r]=Bi(!1),i=$i(null),o=()=>{r(!n)},l=async a=>{r(!1),t.settings.sortOptionDefault=a,await t.saveSettings(),e()};return ji(()=>{let a=s=>{i.current&&!i.current.contains(s.target)&&r(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),L("div",{className:"snw-sort-dropdown-wrapper",ref:i,children:[L("button",{type:"button",onClick:o,class:"snw-sort-dropdown-button",children:L("div",{dangerouslySetInnerHTML:{__html:Gi[t.settings.sortOptionDefault].icon}})}),n&&L("ul",{className:"snw-sort-dropdown-list",children:Object.entries(Gi).map(([a,{label:s,icon:p}])=>L("li",{id:a,onClick:async f=>{f.stopPropagation(),await l(a)},class:"snw-sort-dropdown-list-item",children:[L("span",{dangerouslySetInnerHTML:{__html:p}}),L("span",{className:"snw-sort-dropdown-list-item-label",children:s})]}))})]})};var Yi=(t,e,n,r,i,o,l,a,s)=>{let p=L("div",{className:`${l?"snw-ref-title-popover":"snw-ref-title-side-pane"} tree-item-self is-clickable`,children:[L("div",{className:"snw-ref-title-popover-label","snw-ref-title-type":t,"snw-ref-title-reallink":e,"snw-ref-title-key":n,"snw-data-file-name":r,"snw-data-line-number":o.toString(),children:e}),L(Ki,{plugin:a,onChange:s}),l&&L("span",{className:"snw-ref-title-popover-open-sidepane-icon","snw-ref-title-type":t,"snw-ref-title-reallink":e,"snw-ref-title-key":n,"snw-data-file-name":r,"snw-data-line-number":o.toString(),children:L("span",{className:"snw-ref-title-popover-icon",onClick:u=>{u.stopPropagation(),Mi({duration:0}),a.activateView(t,e,n,r,Number(o))},children:L(Oi,{})})})]}),f=createDiv();return xe(p,f),f};var nt;function Zi(t){nt=t}var gr=async(t,e,n,r,i,o)=>{let l=await Xi(t,n,r),a=createDiv();a.append(Yi(t,e,n,r,l.refCount,i,o,nt,async()=>{let p=a.querySelector(".snw-ref-area");if(p){for(p.style.visibility="hidden";p.firstChild;)p.removeChild(p.firstChild);p.style.visibility="visible";let f=await Xi(t,n,r);p.prepend(f.response),setTimeout(async()=>{await Tn(!1,p)},500)}}));let s=createDiv({cls:"snw-ref-area"});return s.append(l.response),a.append(s),a},js=(t,e)=>t.sort((n,r)=>{let i=n.sourceFile,o=r.sourceFile;switch(e){case"name-asc":return i==null?void 0:i.basename.localeCompare(o==null?void 0:o.basename);case"name-desc":return o==null?void 0:o.basename.localeCompare(i==null?void 0:i.basename);case"mtime-asc":return(i==null?void 0:i.stat.mtime)-(o==null?void 0:o.stat.mtime);case"mtime-desc":return(o==null?void 0:o.stat.mtime)-(i==null?void 0:i.stat.mtime);default:return 0}}),Xi=async(t,e,n)=>{var u,g,d,h;let r=0,i=null;if(t==="File"){let w=Se(),v=[];for(let b of w.values())for(let _ of b)_!=null&&_.resolvedFile&&((u=_==null?void 0:_.resolvedFile)==null?void 0:u.path)===n&&v.push(_);r=v.length,i=v}else{let w=Se().get(e);w===void 0&&(w=Se().get(e));let v=await $s(w);r=v.length,i=v}let o=Array.from(new Set(i.map(w=>{var v;return(v=w.sourceFile)==null?void 0:v.path}))).map(w=>i.find(v=>{var b;return((b=v.sourceFile)==null?void 0:b.path)===w})),l=js(o,nt.settings.sortOptionDefault),a=createDiv(),s=nt.settings.maxFileCountToDisplay;r<s&&(s=r);let p=0,f=null;nt.settings.displayCustomPropertyList.trim()!==""&&(f=nt.settings.displayCustomPropertyList.split(",").map(w=>w.trim()));for(let w=0;w<l.length;w++){if(p>s)continue;let v=l[w],b=createDiv();b.addClass("snw-ref-item-container"),b.addClass("tree-item"),a.appendChild(b);let _=createDiv();_.addClass("snw-ref-item-file"),_.addClass("tree-item-self"),_.addClass("search-result-file-title"),_.addClass("is-clickable"),_.setAttribute("snw-data-line-number","-1"),_.setAttribute("snw-data-file-name",v.sourceFile.path.replace(`.${(g=v.sourceFile)==null?void 0:g.extension}`,"")),_.setAttribute("data-href",v.sourceFile.path),_.setAttribute("href",v.sourceFile.path);let k=createDiv();k.addClass("snw-ref-item-file-icon"),k.addClass("tree-item-icon"),k.addClass("collapse-icon"),(0,Ji.setIcon)(k,"file-box");let c=createDiv();if(c.addClass("snw-ref-item-file-label"),c.addClass("tree-item-inner"),c.innerText=v.sourceFile.basename,_.append(k),_.append(c),b.appendChild(_),f!=null){let y=v.sourceFile?nt.app.metadataCache.getFileCache(v.sourceFile):null;f.forEach(E=>{var M;let I=(M=y==null?void 0:y.frontmatter)==null?void 0:M[E];if(I){let T=L("div",{class:"snw-custom-property-container",children:[L("span",{class:"snw-custom-property-name",children:E}),L("span",{class:"snw-custom-property-text",children:[": ",I]})]}),O=createDiv();xe(T,O),c.append(O)}})}let x=createDiv();x.addClass("snw-ref-item-collection-items"),x.addClass("search-result-file-matches"),b.appendChild(x);for(let y of i)((d=v.sourceFile)==null?void 0:d.path)===((h=y.sourceFile)==null?void 0:h.path)&&p<s&&(p+=1,x.appendChild(await zr(y)))}return{response:a,refCount:r}},$s=async t=>t.sort((e,n)=>{var o;let r=0;e.reference.position!==void 0&&(r=Number(e.reference.position.start.line));let i=0;return n.reference.position!==void 0&&(i=Number(n.reference.position.start.line)),((o=e.sourceFile)==null?void 0:o.basename.localeCompare(n.sourceFile.basename))||Number(r)-Number(i)});var rt;function Qi(t){rt=t,qr(rt)}var Sn=async t=>{let{refType:e,realLink:n,key:r,filePath:i,lineNu:o}=await qs(t),l=createDiv();l.addClass("snw-popover-container"),l.addClass("search-result-container"),l.appendChild(await gr(e,n,r,i,o,!0)),t.setContent(l),setTimeout(async()=>{await Tn(!1,l)},500),fn(l)},eo=async(t,e,n,r,i)=>{let o=createDiv();return o.addClass("snw-sidepane-container"),o.addClass("search-result-container"),o.append(await gr(t,e,n,r,i,!1)),setTimeout(async()=>{await Tn(!1,o)},500),o},Tn=async(t,e)=>{e.querySelectorAll(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-popover-label").forEach(r=>{r.getAttribute("snw-has-handler")||(r.setAttribute("snw-has-handler","true"),r.addEventListener("click",async i=>{var f,u;i.preventDefault();let o=i.target.closest(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-popover-label"),l=Number(o.getAttribute("snw-data-line-number")),a=o.getAttribute("snw-data-file-name"),s=app.metadataCache.getFirstLinkpathDest(a,a);if(!s){new it.Notice(`File not found: ${a}. It may be a broken link.`);return}rt.app.workspace.getLeaf(it.Keymap.isModEvent(i)).openFile(s);let p=o.getAttribute("snw-ref-title-key");if(p){if(p.contains("#^")){let g=Object.entries((f=rt.app.metadataCache.getFileCache(s))==null?void 0:f.blocks);if(g){let d=p.match(/#\^(.+)$/g)[0].replace("#^","").toLowerCase();l=g.find(w=>w[0]===d)[1].position.start.line}}else if(p.contains("#")){let g=(u=rt.app.metadataCache.getFileCache(s))==null?void 0:u.headings;if(g){let d=p.match(/#(.+)/g)[0].replace("#","");l=g.find(w=>w.heading===d).position.start.line}}}l>0&&setTimeout(()=>{try{rt.app.workspace.getActiveViewOfType(it.MarkdownView).setEphemeralState({line:l})}catch(g){}},400)}),rt.app.internalPlugins.plugins["page-preview"].enabled===!0&&r.addEventListener("mouseover",i=>{i.preventDefault();let o=app.internalPlugins.plugins["page-preview"].instance.overrides["obsidian42-strange-new-worlds"]!==!1;if(o===!1||o===!0&&it.Keymap.isModifier(i,"Mod")){let l=i.target,a={scroll:Number(l.getAttribute("snw-data-line-number"))},s=l.getAttribute("snw-data-file-name");s&&app.workspace.trigger("link-hover",{},l,s,"",a)}}))})},qs=async t=>{let e=t.reference,n=e.getAttribute("data-snw-type"),r=e.getAttribute("data-snw-reallink"),i=e.getAttribute("data-snw-key"),o=e.getAttribute("data-snw-filepath"),l=Number(e.getAttribute("snw-data-line-number"));return{refType:n,realLink:r,key:i,filePath:o,lineNu:l}};var Oe="Strange New Worlds",Ln=class extends to.ItemView{constructor(e,n){super(e),this.plugin=n}getViewType(){return Oe}getDisplayText(){return Oe}getIcon(){return"file-digit"}async onOpen(){xe(L("div",{class:"snw-sidepane-loading",children:[L("div",{class:"snw-sidepane-loading-banner",children:"Discovering Strange New Worlds..."}),L("div",{class:"snw-sidepane-loading-subtext",children:"Click a reference counter in the main document for information to appear here."})]}),this.containerEl.querySelector(".view-content"))}async updateView(){let e=this.plugin;this.containerEl.replaceChildren(await eo(e.lastSelectedReferenceType,e.lastSelectedReferenceRealLink,e.lastSelectedReferenceKey,e.lastSelectedReferenceFilePath,e.lastSelectedLineNumber)),fn(this.containerEl)}async onClose(){}};var Bt=require("obsidian");var Vt=require("obsidian");var Ut;function no(t){Ut=t}function be(t,e,n,r,i,o,l){let a=L("div",{className:`snw-reference snw-${e} ${o}`,"data-snw-type":e,"data-snw-reallink":n,"data-snw-key":r.toLocaleUpperCase(),"data-snw-filepath":i,"snw-data-line-number":l.toString(),children:t.toString()}),s=createDiv();xe(a,s);let p=s.firstElementChild;(Vt.Platform.isDesktop||Vt.Platform.isDesktopApp)&&(p.onclick=async d=>In(d.target));let f=Ut.settings.requireModifierKeyToActivateSNWView,u=!0;return Cn(p,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onTrigger(d,h){let w=h;f!==!1&&(w.ctrlKey||w.metaKey?u=!0:u=!1)},onShow(d){if(!u)return!1;setTimeout(async()=>{await Sn(d)},1)}}).popper.classList.add("snw-tippy"),s}var In=async t=>{var l,a,s,p,f;let e=(l=t.getAttribute("data-snw-type"))!=null?l:"",n=(a=t.getAttribute("data-snw-realLink"))!=null?a:"",r=(s=t.getAttribute("data-snw-key"))!=null?s:"",i=(p=t.getAttribute("data-snw-filepath"))!=null?p:"",o=(f=t.getAttribute("snw-data-line-number"))!=null?f:"";Ut.activateView(e,n,r,i,Number(o))},hr=(0,Vt.debounce)(()=>{var e,n;let t=document.querySelectorAll(".snw-liveupdate");for(let r of Array.from(t)){let i=(n=(e=Ut.snwAPI.references.get(r.dataset.snwKey))==null?void 0:e.length)!=null?n:0;if(i<Ut.settings.minimumRefCountThreshold){r.remove();continue}let o=String(i);r.textContent!==o&&(r.textContent=o)}},ot,!0);var st;function io(t){st=t}function zs(){st.app.workspace.iterateAllLeaves(t=>{(t.view.getViewType()==="markdown"||t.view.getViewType()==="file-properties")&&Gs(t.view)})}var Mn=(0,Bt.debounce)(()=>{zs()},ot,!0);function Gs(t){var i,o,l;if(!st.showCountsActive)return;let e=Bt.Platform.isMobile||Bt.Platform.isMobileApp?st.settings.displayPropertyReferencesMobile:st.settings.displayPropertyReferences,n=t;if(!e||!(n!=null&&n.rawFrontmatter))return;let r=n.file?ce(n.file):{};if((i=r.frontmatterLinks)!=null&&i.length)for(let a of n.metadataEditor.rendered){let s=a.valueEl.querySelector(".metadata-link-inner.internal-link");if(s){let f=s.textContent,u=(o=r.frontmatterLinks)==null?void 0:o.find(g=>g.displayText===f);u&&ro(s,u)}let p=a.valueEl.querySelectorAll(".multi-select-pill.internal-link .multi-select-pill-content span");if(p.length)for(let f of Array.from(p)){let u=f.textContent,g=(l=r.frontmatterLinks)==null?void 0:l.find(h=>h.displayText===u),d=f.parentElement;g&&d&&ro(d,g)}}}function ro(t,e){var i,o,l,a,s,p,f;let n=(i=t.parentElement)==null?void 0:i.querySelector(".snw-frontmatter-wrapper"),r=e.references.length;if(!n&&r>=st.settings.minimumRefCountThreshold){n=createSpan({cls:"snw-frontmatter-wrapper"});let u=be(r,"link",e.references[0].realLink,e.key,((a=(l=(o=e.references[0])==null?void 0:o.resolvedFile)==null?void 0:l.path)!=null?a:"").replace(`.${(f=(p=(s=e.references[0])==null?void 0:s.resolvedFile)==null?void 0:p.extension)!=null?f:""}`,""),"snw-frontmatter-count",e.pos.start.line);n.appendChild(u),t.insertAdjacentElement("afterend",n)}else try{if(r>=st.settings.minimumRefCountThreshold){let u=n==null?void 0:n.querySelector(".snw-frontmatter-count");u&&(u.innerText=` ${r} `)}else n==null||n.remove()}catch(u){}}var $t=require("obsidian");var jt;function oo(t){jt=t}function Ks(){!jt.settings.displayIncomingFilesheader||!jt.showCountsActive||jt.app.workspace.iterateAllLeaves(t=>{t.view.getViewType()==="markdown"&&Ys(t.view)})}var On=(0,$t.debounce)(()=>{Ks()},ot,!0);function Ys(t){var f,u,g;let e=t.file;if(!e)return;let n=Se(),r=0;for(let d of n.values())for(let h of d)h!=null&&h.resolvedFile&&((f=h==null?void 0:h.resolvedFile)==null?void 0:f.path)===e.path&&r++;let i=ce(e);if(((g=(u=i==null?void 0:i.cacheMetaData)==null?void 0:u.frontmatter)==null?void 0:g["snw-file-exclude"])===!0&&(r=0),r<1){let d=t.contentEl.querySelector(".snw-header-count-wrapper");d&&d.remove();return}let o=t.contentEl.querySelector(".snw-header-count");if(o&&o.dataset.snwKey===e.basename){o.innerText=` ${r.toString()} `;return}let l=t.contentEl,a=l.querySelector(".snw-header-count-wrapper");a?o=l.querySelector(".snw-header-count"):(a=createDiv({cls:"snw-reference snw-header-count-wrapper"}),o=createDiv({cls:"snw-header-count"}),a.appendChild(o),l.prepend(a)),o&&(o.innerText=` ${r.toString()} `),($t.Platform.isDesktop||$t.Platform.isDesktopApp)&&o&&(o.onclick=d=>{d.stopPropagation(),a&&In(a)}),a.setAttribute("data-snw-reallink",e.basename),a.setAttribute("data-snw-key",e.basename),a.setAttribute("data-snw-type","File"),a.setAttribute("data-snw-filepath",e.path),a.onclick=d=>{d.stopPropagation(),In(d.target)};let s=!0;Cn(a,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onTrigger(d,h){let w=h;jt.settings.requireModifierKeyToActivateSNWView!==!1&&(w.ctrlKey||w.metaKey?s=!0:s=!1)},onShow(d){if(!s)return!1;setTimeout(async()=>{await Sn(d)},1)}}).popper.classList.add("snw-tippy")}var qt=require("@codemirror/view"),so=require("obsidian");var vr;function ao(t){vr=t}var Xs=class extends qt.GutterMarker{constructor(t,e,n,r,i,o){super(),this.referenceCount=t,this.referenceType=e,this.realLink=n,this.key=r,this.filePath=i,this.addCssClass=o}toDOM(){return be(this.referenceCount,this.referenceType,this.realLink,this.key,this.filePath,this.addCssClass,0)}},Js=new class extends qt.GutterMarker{toDOM(){return document.createTextNode("\xF8\xF8\xF8")}},Zs=(0,qt.gutter)({class:"snw-gutter-ref",lineMarker(t,e){var l,a,s,p,f,u,g,d,h,w;let n=t.state.field(so.editorInfoField);if(((l=n.currentMode)==null?void 0:l.sourceMode)===!0&&vr.settings.displayInlineReferencesInSourceMode===!1||!n.file)return null;let r=ce(n.file);if(((s=(a=r==null?void 0:r.cacheMetaData)==null?void 0:a.frontmatter)==null?void 0:s["snw-file-exclude"])===!0||((f=(p=r==null?void 0:r.cacheMetaData)==null?void 0:p.frontmatter)==null?void 0:f["snw-canvas-exclude-edit"])===!0)return null;let i=(u=n.app.metadataCache.getFileCache(n.file))==null?void 0:u.embeds;if(!i||!i.length)return null;let o=t.state.doc.lineAt(e.from).number;for(let v of i)if(v.position.start.line+1===o){for(let b of(g=r==null?void 0:r.embeds)!=null?g:[])if((b==null?void 0:b.references.length)>=vr.settings.minimumRefCountThreshold&&(b==null?void 0:b.pos.start.line)+1===o){let _=t.state.doc.lineAt(e.from).text.trim();if(_.startsWith("!")){let k=_.replace("![[","").replace("]]","").split("|")[0];if((k.startsWith("#")?n.file.path.replace(`.${n.file.extension}`,"")+k:re(k)||k).toLocaleUpperCase()===b.key)return new Xs(b.references.length,"embed",b.references[0].realLink,b.key,((h=(d=b.references[0].resolvedFile)==null?void 0:d.path)!=null?h:"").replace(`.${(w=b.references[0].resolvedFile)==null?void 0:w.extension}`,""),"snw-embed-special snw-liveupdate")}}}return null},initialSpacer:()=>Js}),lo=Zs;var De=require("@codemirror/view"),at=require("obsidian");var He;function po(t){He=t}var co=De.ViewPlugin.fromClass(class{constructor(t){this.view=t;this.decorations=De.Decoration.none;this.regxPattern="";He.settings.enableRenderingBlockIdInLivePreview&&(this.regxPattern="(\\s\\^)(\\S+)$"),He.settings.enableRenderingEmbedsInLivePreview&&(this.regxPattern+=`${this.regxPattern!==""?"|":""}!\\[\\[(.*?)\\]\\]`),He.settings.enableRenderingLinksInLivePreview&&(this.regxPattern+=`${this.regxPattern!==""?"|":""}\\[\\[(.*?)\\]\\]`),He.settings.enableRenderingHeadersInLivePreview&&(this.regxPattern+=`${this.regxPattern!==""?"|":""}^#+\\s.+`),this.regxPattern!==""&&(this.decorator=new De.MatchDecorator({regexp:new RegExp(this.regxPattern,"g"),decorate:(e,n,r,i,o)=>{var p,f,u,g,d,h,w,v,b,_,k,c,x,y,E,I,M,T,O,A,S,U,ne,X;let l=o.state.field(at.editorInfoField);if(!l.file)return;if(((p=l.currentMode)==null?void 0:p.sourceMode)===!0&&He.settings.displayInlineReferencesInSourceMode===!1)return null;let a=l.file,s=ce(a);if((s.links||s.headings||s.embeds||s.blocks)&&((u=(f=s==null?void 0:s.cacheMetaData)==null?void 0:f.frontmatter)==null?void 0:u["snw-file-exclude"])!==!0&&((d=(g=s==null?void 0:s.cacheMetaData)==null?void 0:g.frontmatter)==null?void 0:d["snw-canvas-exclude-edit"])!==!0){let j=i[0].charAt(0),H=[];if(j==="["&&((w=(h=s==null?void 0:s.links)==null?void 0:h.length)!=null?w:0)>0){let D=i[0].replace("[[","").replace("]]","");D.startsWith("#")&&(D=a.path.replace(`.${(v=l.file)==null?void 0:v.extension}`,"")+D),D=D.toLocaleUpperCase(),H.push({key:D,transformedCachedItem:(b=s.links)!=null?b:null,refType:"link",from:r,to:r})}else if(j==="#"&&((c=((_=s==null?void 0:s.headings)==null?void 0:_.length)||((k=s==null?void 0:s.links)==null?void 0:k.length))!=null?c:0)>0){if(H.push({key:(0,at.stripHeading)(i[0].replace(/^#+/,"").substring(1)),transformedCachedItem:(x=s.headings)!=null?x:null,refType:"heading",from:r,to:r}),He.settings.enableRenderingLinksInLivePreview){let D=i[0].match(/\[\[(.*?)\]\]|!\[\[(.*?)\]\]/g);if(D)for(let G of D)H.push({key:G.replace("![[","").replace("[[","").replace("]]","").toLocaleUpperCase(),transformedCachedItem:G.startsWith("!")?(y=s.embeds)!=null?y:null:(E=s.links)!=null?E:null,refType:"link",from:r-i[0].length+(i[0].indexOf(G)+G.length),to:r-i[0].length+(i[0].indexOf(G)+G.length)})}}else if(j==="!"&&((M=(I=s==null?void 0:s.embeds)==null?void 0:I.length)!=null?M:0)>0){let D=i[0].replace("![[","").replace("]]","");D.startsWith("#")&&(D=a.path.replace(`.${(T=l.file)==null?void 0:T.extension}`,"")+(0,at.stripHeading)(D)),H.push({key:D.toLocaleUpperCase(),transformedCachedItem:(O=s.embeds)!=null?O:null,refType:"embed",from:r,to:r})}else j===" "&&((S=(A=s==null?void 0:s.blocks)==null?void 0:A.length)!=null?S:0)>0&&H.push({key:(a.path.replace(`.${(U=l.file)==null?void 0:U.extension}`,"")+i[0].replace(" ^","#^")).toLocaleUpperCase(),transformedCachedItem:(ne=s.blocks)!=null?ne:null,refType:"block",from:r,to:r});let me=H.sort((D,G)=>D.to===G.to?D.refType==="heading"?1:-1:D.to-G.to);for(let D of H)if(D.key!==""){let G=Qs(D.refType,D.key,(X=D.transformedCachedItem)!=null?X:[],a.path,a.extension);G!=null&&e(D.from,D.to,De.Decoration.widget({widget:G,side:1}))}}}}),this.decorations=this.decorator.createDeco(t))}update(t){this.regxPattern!==""&&(t.docChanged||t.viewportChanged)&&(this.decorations=this.decorator?this.decorator.updateDeco(t,this.decorations):this.decorations)}},{decorations:t=>t.decorations}),Qs=(t,e,n,r,i)=>{var l,a;let o=e;for(let s=0;s<n.length;s++){let p=n[s],f=p.key;if(t==="heading"&&(f=(0,at.stripHeading)((l=p.headerMatch)!=null?l:""),o=o.replace(/^\s+|\s+$/g,"")),t==="embed"||t==="link"){o.contains("|")&&(o=o.substring(0,e.search(/\|/)));let u=re(o).toLocaleUpperCase();o=u===""?o:u,f.startsWith("#")&&(f=r.replace(`.${i}`,"")+(0,at.stripHeading)(f))}if(f===o){let u=(a=p==null?void 0:p.references[0])!=null&&a.resolvedFile?p.references[0].resolvedFile.path.replace(`.${p.references[0].resolvedFile}`,""):o;return(p==null?void 0:p.references.length)>=He.settings.minimumRefCountThreshold?new yr(p.references.length,p.type,p.references[0].realLink,p.key,u,"snw-liveupdate",p.pos.start.line):null}}return null},yr=class extends De.WidgetType{constructor(e,n,r,i,o,l,a){super(),this.referenceCount=e,this.referenceType=n,this.realLink=r,this.key=i,this.filePath=o,this.addCssClass=l,this.lineNu=a}toDOM(){return be(this.referenceCount,this.referenceType,this.realLink,this.key,this.filePath,this.addCssClass,this.lineNu)}destroy(){}ignoreEvent(){return!1}};var uo=require("obsidian");var Ve;function fo(t){Ve=t}function br(t,e){var i,o;if(e.remainingNestLevel===4||t.hasAttribute("uic")||t.querySelectorAll(".contains-task-list").length>0)return;let n=Ve.app.vault.fileMap[e.sourcePath];if(n===void 0)return;let r=Ve.app.metadataCache.getFileCache(n);if(!((i=r==null?void 0:r.frontmatter)!=null&&i["kanban-plugin"]||(o=e.el.parentElement)!=null&&o.classList.contains("kanban-plugin__markdown-preview-view")))try{e.addChild(new wr(t,e.getSectionInfo(t),n))}catch(l){}}var wr=class extends uo.MarkdownRenderChild{constructor(e,n,r){super(e),this.containerEl=e,this.sectionInfo=n,this.currentFile=r}onload(){this.processMarkdown()}processMarkdown(){var r,i,o,l,a,s,p,f,u,g,d,h,w,v,b,_;let e=Ve.settings.minimumRefCountThreshold,n=ce(this.currentFile);if(((i=(r=n==null?void 0:n.cacheMetaData)==null?void 0:r.frontmatter)==null?void 0:i["snw-file-exclude"])!==!0&&((l=(o=n==null?void 0:n.cacheMetaData)==null?void 0:o.frontmatter)==null?void 0:l["snw-canvas-exclude-preview"])!==!0&&(n!=null&&n.blocks||n.embeds||n.headings||n.links)){if(Ve.settings.enableRenderingBlockIdInMarkdown&&(n!=null&&n.blocks)){for(let k of n.blocks)if(k.references.length>=e&&k.pos.start.line>=((a=this.sectionInfo)==null?void 0:a.lineStart)&&k.pos.end.line<=((s=this.sectionInfo)==null?void 0:s.lineEnd)){let c=be(k.references.length,"block",k.references[0].realLink,k.key,(g=(p=k.references[0])==null?void 0:p.resolvedFile)==null?void 0:g.path.replace(`.${(u=(f=k.references[0])==null?void 0:f.resolvedFile)==null?void 0:u.path}`,""),"snw-liveupdate",k.pos.start.line),x=this.containerEl.querySelector("p"),y=k.pos.start.line-this.sectionInfo.lineStart;x?(x||(x=this.containerEl.querySelector(`ol[data-line="${y}"]`)),x.append(c)):(x=this.containerEl.querySelector(`li[data-line="${y}"]`),x.querySelector("ul")?x.querySelector("ul").before(c):x.append(c));try{x.hasClass("snw-block-preview")||c.addClass("snw-block-preview")}catch(E){}}}if(Ve.settings.enableRenderingEmbedsInMarkdown&&(n!=null&&n.embeds)&&this.containerEl.querySelectorAll(".internal-embed:not(.snw-embed-preview)").forEach(k=>{var y,E,I,M,T,O,A;let c=k.getAttribute("src");if(!c)return;let x=re(c[0]==="#"?this.currentFile.path.slice(0,-(this.currentFile.extension.length+1))+c:c)||c;for(let S of(y=n.embeds)!=null?y:[])if(S.references.length>=e&&x.toLocaleUpperCase()===S.key.toLocaleUpperCase()){let U=be(S.references.length,"embed",S.references[0].realLink,S.key.toLocaleUpperCase(),((M=(I=(E=S.references[0])==null?void 0:E.resolvedFile)==null?void 0:I.path)!=null?M:"").replace(`.${(A=(O=(T=S.references[0])==null?void 0:T.resolvedFile)==null?void 0:O.extension)!=null?A:""}`,""),"snw-liveupdate",S.pos.start.line);U.addClass("snw-embed-preview"),k.after(U);break}}),Ve.settings.enableRenderingLinksInMarkdown&&(n!=null&&n.links)&&this.containerEl.querySelectorAll("a.internal-link").forEach(k=>{var y,E,I,M,T,O,A;let c=k.getAttribute("data-href");if(!c)return;let x=re(c[0]==="#"?this.currentFile.path.slice(0,-(this.currentFile.extension.length+1))+c:c)||c;for(let S of(y=n.links)!=null?y:[])if(S.references.length>=e&&S.key.toLocaleUpperCase()===x.toLocaleUpperCase()){let U=be(S.references.length,"link",S.references[0].realLink,S.key.toLocaleUpperCase(),((M=(I=(E=S.references[0])==null?void 0:E.resolvedFile)==null?void 0:I.path)!=null?M:"").replace(`.${(A=(O=(T=S.references[0])==null?void 0:T.resolvedFile)==null?void 0:O.extension)!=null?A:""}`,""),"snw-liveupdate",S.pos.start.line);U.addClass("snw-link-preview"),k.after(U);break}}),Ve.settings.enableRenderingHeadersInMarkdown){let k=this.containerEl.querySelector("[data-heading]");if(n!=null&&n.headings&&k){let c=k.getAttribute("data-heading");for(let x of n.headings)if(x.references.length>=e&&x.headerMatch===(c==null?void 0:c.replace(/\[|\]/g,""))){let y=be(x.references.length,"heading",x.references[0].realLink,x.key,((w=(h=(d=x.references[0])==null?void 0:d.resolvedFile)==null?void 0:h.path)!=null?w:"").replace(`.${(_=(b=(v=x.references[0])==null?void 0:v.resolvedFile)==null?void 0:b.extension)!=null?_:""}`,""),"snw-liveupdate",x.pos.start.line);y.addClass("snw-heading-preview");let E=this.containerEl.querySelector("h1,h2,h3,h4,h5,h6");E&&E.insertAdjacentElement("beforeend",y);break}}}}}};var ot=200,Dn=class extends le.Plugin{constructor(){super(...arguments);this.appName=this.manifest.name;this.appID=this.manifest.id;this.APP_ABBREVIARTION="SNW";this.settings=on;this.showCountsActive=on.enableOnStartupDesktop;this.lastSelectedReferenceType="";this.lastSelectedReferenceRealLink="";this.lastSelectedReferenceKey="";this.lastSelectedReferenceFilePath="";this.lastSelectedLineNumber=0;this.snwAPI=new Et(this);this.markdownPostProcessor=null;this.editorExtensions=[];this.commands=new Tt(this)}async onload(){console.log(`loading ${this.appName}`),Cr(this),Zi(this),no(this),ao(this),oo(this),io(this),fo(this),po(this),Qi(this),window.snwAPI=this.snwAPI,await this.loadSettings(),this.addSettingTab(new sn(this.app,this)),le.Platform.isMobile||le.Platform.isMobileApp?this.showCountsActive=this.settings.enableOnStartupMobile:this.showCountsActive=this.settings.enableOnStartupDesktop,this.registerView(Oe,i=>new Ln(i,this));let n=(0,le.debounce)(()=>{rn(),On(),Mn(),hr()},3e3,!0),r=(0,le.debounce)(async(i,o,l)=>{await Pr(i),Fn(i,l),On(),Mn(),hr()},1e3,!0);this.registerEvent(this.app.vault.on("rename",n)),this.registerEvent(this.app.vault.on("delete",n)),this.registerEvent(this.app.metadataCache.on("changed",r)),this.app.workspace.registerHoverLinkSource(this.appID,{display:this.appName,defaultMod:!0}),this.snwAPI.settings=this.settings,this.registerEditorExtension(this.editorExtensions),this.app.workspace.on("layout-change",()=>{On(),Mn()}),this.toggleStateSNWMarkdownPreview(),this.toggleStateSNWLivePreview(),this.toggleStateSNWGutters(),this.app.workspace.onLayoutReady(async()=>{var i,o;(i=this.app.workspace.getLeavesOfType(Oe))!=null&&i.length||await((o=this.app.workspace.getRightLeaf(!1))==null?void 0:o.setViewState({type:Oe,active:!1})),rn()})}async activateView(n,r,i,o,l){this.lastSelectedReferenceType=n,this.lastSelectedReferenceRealLink=r,this.lastSelectedReferenceKey=i,this.lastSelectedReferenceFilePath=o,this.lastSelectedLineNumber=l;let{workspace:a}=this.app,s=null,p=a.getLeavesOfType(Oe);if(p.length>0)s=p[0];else{let f=a.getRightLeaf(!1);await(f==null?void 0:f.setViewState({type:Oe,active:!0}))}s&&a.revealLeaf(s),await this.app.workspace.getLeavesOfType(Oe)[0].view.updateView()}toggleStateSNWMarkdownPreview(){this.settings.displayInlineReferencesMarkdown&&this.showCountsActive&&this.markdownPostProcessor===null?this.markdownPostProcessor=this.registerMarkdownPostProcessor((n,r)=>br(n,r),100):(this.markdownPostProcessor?le.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessor):console.log("Markdown post processor is not registered"),this.markdownPostProcessor=null)}toggleStateSNWLivePreview(){let n=this.settings.displayInlineReferencesLivePreview;n===!0&&(n=this.showCountsActive),this.updateCMExtensionState("inline-ref",n,co)}toggleStateSNWGutters(){let n=le.Platform.isMobile||le.Platform.isMobileApp?this.settings.displayEmbedReferencesInGutterMobile:this.settings.displayEmbedReferencesInGutter;n===!0&&(n=this.showCountsActive),this.updateCMExtensionState("gutter",n,lo)}updateCMExtensionState(n,r,i){if(r===!0)this.editorExtensions.push(i),this.editorExtensions[this.editorExtensions.length-1].snwID=n;else for(let o=0;o<this.editorExtensions.length;o++)if(this.editorExtensions[o].snwID===n){this.editorExtensions.splice(o,1);break}this.app.workspace.updateOptions()}async loadSettings(){this.settings=Object.assign({},on,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}onunload(){console.log(`unloading ${this.appName}`);try{this.markdownPostProcessor?le.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessor):console.log("Markdown post processor is not registered"),this.app.workspace.unregisterHoverLinkSource(this.appID)}catch(n){}}};

/* nosourcemap */